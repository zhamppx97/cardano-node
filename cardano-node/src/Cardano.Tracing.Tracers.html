<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE BangPatterns #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE ConstraintKinds #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE FlexibleContexts #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE FlexibleInstances #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-6"></span><span class="hs-pragma">{-# LANGUAGE MonoLocalBinds #-}</span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# LANGUAGE MultiParamTypeClasses #-}</span><span>
</span><span id="line-8"></span><span class="hs-pragma">{-# LANGUAGE NamedFieldPuns #-}</span><span>
</span><span id="line-9"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-10"></span><span class="hs-pragma">{-# LANGUAGE QuantifiedConstraints #-}</span><span>
</span><span id="line-11"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-12"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-13"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-14"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-orphans  #-}</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cardano.Tracing.Tracers</span><span>
</span><span id="line-19"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier">Tracers</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier">TraceOptions</span></a></span><span>
</span><span id="line-21"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier">mkTracers</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracers"><span class="hs-identifier">nullTracers</span></a></span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier">traceCounter</span></a></span><span>
</span><span id="line-24"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Prelude</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">show</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">show</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">GHC.Clock</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">getMonotonicTimeNSec</span></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Codec.CBOR.Read</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">DeserialiseFailure</span></span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Aeson</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.HashMap.Strict</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Text</span></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Data.Time</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">UTCTime</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Network.Mux</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MuxTrace</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">WithMuxBearer</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Network.Socket</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Socket</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SockAddr</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Control.Tracer.Transformers</span></span><span>
</span><span id="line-42"></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.Slotting.Slot</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">EpochNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">SlotNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Aggregated</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Measurable</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Tracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">annotateSeverity</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Data.Transformers</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Internal.ElidingTracer</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Trace</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">traceNamedObject</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Cardano.BM.Tracing</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Block</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockProtocol</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">CannotForge</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ConvertRawHash</span></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>                     </span><span class="annot"><span class="hs-identifier">ForgeStateInfo</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ForgeStateUpdateError</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Header</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">realPointSlot</span></span><span class="hs-special">)</span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.BlockchainTime</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SystemStart</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>                     </span><span class="annot"><span class="hs-identifier">TraceBlockchainTimeEvent</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.HeaderValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">OtherHeaderEnvelopeError</span></span><span class="hs-special">)</span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Abstract</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LedgerErr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LedgerState</span></span><span class="hs-special">)</span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Extended</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ledgerState</span></span><span class="hs-special">)</span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Inspect</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">InspectLedger</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">LedgerEvent</span></span><span class="hs-special">)</span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.Query</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Query</span></span><span class="hs-special">)</span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsMempool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ApplyTxErr</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GenTx</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">GenTxId</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HasTxs</span></span><span class="hs-special">)</span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Ledger.SupportsProtocol</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">LedgerSupportsProtocol</span></span><span class="hs-special">)</span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Mempool.API</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MempoolSize</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">TraceEventMempool</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Network.NodeToClient</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NodeToClient</span></span><span>
</span><span id="line-65"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Network.NodeToNode</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NodeToNode</span></span><span>
</span><span id="line-66"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node.Run</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">RunNode</span></span><span class="hs-special">)</span><span>
</span><span id="line-67"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Node.Tracers</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Consensus</span></span><span>
</span><span id="line-68"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Protocol.Abstract</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ValidationErr</span></span><span class="hs-special">)</span><span>
</span><span id="line-69"></span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.AnchoredFragment</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AF</span></span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Block</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">BlockNo</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Point</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">StandardHash</span></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>                     </span><span class="annot"><span class="hs-identifier">blockNo</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">pointSlot</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">unBlockNo</span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.BlockFetch.ClientState</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">TraceLabelPeer</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.BlockFetch.Decision</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FetchDecision</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">FetchDecline</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToClient</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NtC</span></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.NodeToNode</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NtN</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fromWithOrigin</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">withOrigin</span></span><span class="hs-special">)</span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Protocol.LocalStateQuery.Type</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ShowQuery</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Subscription</span></span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Storage.ChainDB</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ChainDB</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.Storage.LedgerDB.OnDisk</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">LedgerDB</span></span><span>
</span><span id="line-83"></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Config.html"><span class="hs-identifier">Cardano.Tracing.Config</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Constraints.html"><span class="hs-identifier">Cardano.Tracing.Constraints</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Constraints.html#TraceConstraints"><span class="hs-identifier">TraceConstraints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.ConvertTxId.html"><span class="hs-identifier">Cardano.Tracing.ConvertTxId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.ConvertTxId.html#ConvertTxId"><span class="hs-identifier">ConvertTxId</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Kernel.html"><span class="hs-identifier">Cardano.Tracing.Kernel</span></a></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Metrics.html"><span class="hs-identifier">Cardano.Tracing.Metrics</span></a></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.MicroBenchmarking.html"><span class="hs-identifier">Cardano.Tracing.MicroBenchmarking</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Tracing.Queries.html"><span class="hs-identifier">Cardano.Tracing.Queries</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Configuration.Logging.html"><span class="hs-identifier">Cardano.Node.Configuration.Logging</span></a></span><span>
</span><span id="line-93"></span><span class="hs-comment">-- For tracing instances</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Byron.html"><span class="hs-identifier">Cardano.Node.Protocol.Byron</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><a href="Cardano.Node.Protocol.Shelley.html"><span class="hs-identifier">Cardano.Node.Protocol.Shelley</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.MiniProtocol.BlockFetch.Server</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Consensus.MiniProtocol.ChainSync.Server</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span>           </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.TxSubmission.Inbound</span></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Ouroboros.Network.Diffusion</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">ND</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Cardano.Node.STM.html"><span class="hs-identifier">Cardano.Node.STM</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">STM</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Control.Concurrent.STM</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">STM</span></span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-comment">{- HLINT ignore &quot;Redundant bracket&quot; -}</span><span>
</span><span id="line-105"></span><span class="hs-comment">{- HLINT ignore &quot;Use record patterns&quot; -}</span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span class="hs-keyword">data</span><span> </span><span id="Tracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-var">Tracers</span></a></span></span><span> </span><span id="local-6989586621679351098"><span class="annot"><a href="#local-6989586621679351098"><span class="hs-identifier hs-type">peer</span></a></span></span><span> </span><span id="local-6989586621679351097"><span class="annot"><a href="#local-6989586621679351097"><span class="hs-identifier hs-type">localPeer</span></a></span></span><span> </span><span id="local-6989586621679351099"><span class="annot"><a href="#local-6989586621679351099"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Tracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-var">Tracers</span></a></span></span><span>
</span><span id="line-108"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Trace the ChainDB</span><span>
</span><span id="line-109"></span><span>    </span><span id="chainDBTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#chainDBTracer"><span class="hs-identifier hs-var hs-var">chainDBTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679351099"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-comment">-- | Consensus-specific tracers.</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="consensusTracers"><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; Tracers IO peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#consensusTracers"><span class="hs-identifier hs-var hs-var">consensusTracers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.Tracers</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679351098"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679351097"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679351099"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-112"></span><span>    </span><span class="hs-comment">-- | Tracers for the node-to-node protocols.</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nodeToNodeTracers"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers"><span class="hs-identifier hs-var hs-var">nodeToNodeTracers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToNode.Tracers</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679351098"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679351099"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span>
</span><span id="line-114"></span><span>    </span><span class="hs-comment">--, serialisedBlockTracer :: NodeToNode.SerialisedTracer IO peer blk (SerialisedBlockTrace)</span><span>
</span><span id="line-115"></span><span>    </span><span class="hs-comment">-- | Tracers for the node-to-client protocols</span><span>
</span><span id="line-116"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="nodeToClientTracers"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers"><span class="hs-identifier hs-var hs-var">nodeToClientTracers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToClient.Tracers</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679351097"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679351099"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span>
</span><span id="line-117"></span><span>    </span><span class="hs-comment">-- | Trace the IP subscription manager</span><span>
</span><span id="line-118"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ipSubscriptionTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO (WithIPList (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#ipSubscriptionTracer"><span class="hs-identifier hs-var hs-var">ipSubscriptionTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithIPList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SubscriptionTrace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Socket.SockAddr</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-comment">-- | Trace the DNS subscription manager</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dnsSubscriptionTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#dnsSubscriptionTracer"><span class="hs-identifier hs-var hs-var">dnsSubscriptionTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithDomainName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SubscriptionTrace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Socket.SockAddr</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-comment">-- | Trace the DNS resolver</span><span>
</span><span id="line-122"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="dnsResolverTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; Tracer IO (WithDomainName DnsTrace)
</span><a href="Cardano.Tracing.Tracers.html#dnsResolverTracer"><span class="hs-identifier hs-var hs-var">dnsResolverTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithDomainName</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DnsTrace</span></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-comment">-- | Trace error policy resolution</span><span>
</span><span id="line-124"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="errorPolicyTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#errorPolicyTracer"><span class="hs-identifier hs-var hs-var">errorPolicyTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NtN.WithAddr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Socket.SockAddr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtN.ErrorPolicyTrace</span></span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-comment">-- | Trace local error policy resolution</span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="localErrorPolicyTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#localErrorPolicyTracer"><span class="hs-identifier hs-var hs-var">localErrorPolicyTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NtN.WithAddr</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtC.LocalAddress</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtN.ErrorPolicyTrace</span></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="acceptPolicyTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO AcceptConnectionsPolicyTrace
</span><a href="Cardano.Tracing.Tracers.html#acceptPolicyTracer"><span class="hs-identifier hs-var hs-var">acceptPolicyTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtN.AcceptConnectionsPolicyTrace</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="hs-comment">-- | Trace the Mux</span><span>
</span><span id="line-129"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="muxTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO (WithMuxBearer peer MuxTrace)
</span><a href="Cardano.Tracing.Tracers.html#muxTracer"><span class="hs-identifier hs-var hs-var">muxTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithMuxBearer</span></span><span> </span><span class="annot"><a href="#local-6989586621679351098"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">MuxTrace</span></span><span class="hs-special">)</span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="handshakeTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#handshakeTracer"><span class="hs-identifier hs-var hs-var">handshakeTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtN.HandshakeTr</span></span><span>
</span><span id="line-131"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="localHandshakeTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#localHandshakeTracer"><span class="hs-identifier hs-var hs-var">localHandshakeTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">NtC.HandshakeTr</span></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="diffusionInitializationTracer"><span class="annot"><span class="annottext">Tracers peer localPeer blk
-&gt; Tracer IO DiffusionInitializationTracer
</span><a href="Cardano.Tracing.Tracers.html#diffusionInitializationTracer"><span class="hs-identifier hs-var hs-var">diffusionInitializationTracer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ND.DiffusionInitializationTracer</span></span><span>
</span><span id="line-133"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-keyword">data</span><span> </span><span id="ForgeTracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ForgeTracers"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span></span><span>
</span><span id="line-136"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="ftForged"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForged"><span class="hs-identifier hs-var hs-var">ftForged</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftForgeAboutToLead"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgeAboutToLead"><span class="hs-identifier hs-var hs-var">ftForgeAboutToLead</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftCouldNotForge"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-139"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftAdopted"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftAdopted"><span class="hs-identifier hs-var hs-var">ftAdopted</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-140"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftDidntAdoptBlock"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftDidntAdoptBlock"><span class="hs-identifier hs-var hs-var">ftDidntAdoptBlock</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-141"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftForgedInvalid"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgedInvalid"><span class="hs-identifier hs-var hs-var">ftForgedInvalid</span></a></span></span><span>   </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeNotLeader"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeNotLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeNotLeader</span></a></span></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeCannotForge"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeCannotForge"><span class="hs-identifier hs-var hs-var">ftTraceNodeCannotForge</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceForgeStateUpdateError"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceForgeStateUpdateError"><span class="hs-identifier hs-var hs-var">ftTraceForgeStateUpdateError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-145"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceBlockFromFuture"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceBlockFromFuture"><span class="hs-identifier hs-var hs-var">ftTraceBlockFromFuture</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceSlotIsImmutable"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceSlotIsImmutable"><span class="hs-identifier hs-var hs-var">ftTraceSlotIsImmutable</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-147"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="ftTraceNodeIsLeader"><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeIsLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeIsLeader</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621679350619"><span id="local-6989586621679350620"><span id="local-6989586621679350621"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nullTracers"><span class="hs-identifier hs-type">nullTracers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350621"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350620"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350619"><span class="hs-identifier hs-type">blk</span></a></span></span></span></span><span>
</span><span id="line-151"></span><span id="nullTracers"><span class="annot"><span class="annottext">nullTracers :: Tracers peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#nullTracers"><span class="hs-identifier hs-var hs-var">nullTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk.
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracer IO (WithIPList (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName DnsTrace)
-&gt; Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
-&gt; Tracer IO AcceptConnectionsPolicyTrace
-&gt; Tracer IO (WithMuxBearer peer MuxTrace)
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO DiffusionInitializationTracer
-&gt; Tracers peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-152"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers IO peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer localPeer blk
forall (m :: * -&gt; *) remotePeer localPeer blk.
Monad m =&gt;
Tracers m remotePeer localPeer blk
</span><span class="hs-identifier hs-var">Consensus.nullTracers</span></span><span>
</span><span id="line-154"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO localPeer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToClient.nullTracers</span></span><span>
</span><span id="line-155"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers IO peer blk DeserialiseFailure
forall (m :: * -&gt; *) peer blk e. Monad m =&gt; Tracers m peer blk e
</span><span class="hs-identifier hs-var">NodeToNode.nullTracers</span></span><span>
</span><span id="line-156"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ipSubscriptionTracer :: Tracer IO (WithIPList (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#ipSubscriptionTracer"><span class="hs-identifier hs-var">ipSubscriptionTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithIPList (SubscriptionTrace SockAddr))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsSubscriptionTracer :: Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#dnsSubscriptionTracer"><span class="hs-identifier hs-var">dnsSubscriptionTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsResolverTracer :: Tracer IO (WithDomainName DnsTrace)
</span><a href="Cardano.Tracing.Tracers.html#dnsResolverTracer"><span class="hs-identifier hs-var">dnsResolverTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithDomainName DnsTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errorPolicyTracer :: Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#errorPolicyTracer"><span class="hs-identifier hs-var">errorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-160"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localErrorPolicyTracer :: Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#localErrorPolicyTracer"><span class="hs-identifier hs-var">localErrorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-161"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">acceptPolicyTracer :: Tracer IO AcceptConnectionsPolicyTrace
</span><a href="Cardano.Tracing.Tracers.html#acceptPolicyTracer"><span class="hs-identifier hs-var">acceptPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO AcceptConnectionsPolicyTrace
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">muxTracer :: Tracer IO (WithMuxBearer peer MuxTrace)
</span><a href="Cardano.Tracing.Tracers.html#muxTracer"><span class="hs-identifier hs-var">muxTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithMuxBearer peer MuxTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">handshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#handshakeTracer"><span class="hs-identifier hs-var">handshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO HandshakeTr
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-164"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localHandshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#localHandshakeTracer"><span class="hs-identifier hs-var">localHandshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO HandshakeTr
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionInitializationTracer :: Tracer IO DiffusionInitializationTracer
</span><a href="Cardano.Tracing.Tracers.html#diffusionInitializationTracer"><span class="hs-identifier hs-var">diffusionInitializationTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO DiffusionInitializationTracer
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-166"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span id="local-6989586621679351059"><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-type">indexGCType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679351059"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-170"></span><span id="indexGCType"><span class="annot"><span class="annottext">indexGCType :: TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var hs-var">indexGCType</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.ScheduledGC</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-171"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.PerformedGC</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span id="local-6989586621679351060"><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-type">indexReplType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679351060"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span></span><span>
</span><span id="line-174"></span><span id="indexReplType"><span class="annot"><span class="annottext">indexReplType :: TraceLedgerReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var hs-var">indexReplType</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayFromGenesis</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-175"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayFromSnapshot</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">2</span></span><span>
</span><span id="line-176"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">3</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span id="local-6989586621679350607"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679350594"><span id="local-6989586621679350596"><span id="local-6989586621679350598"><span id="local-6989586621679350601"><span id="local-6989586621679350603"><span class="annot"><span class="hs-identifier hs-type">ElidingTracer</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350607"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>  </span><span class="hs-comment">-- equivalent by type and severity</span><span>
</span><span id="line-180"></span><span>  </span><span id="local-6989586621679350592"><span class="annot"><span class="annottext">isEquivalent :: WithSeverity (TraceEvent blk)
-&gt; WithSeverity (TraceEvent blk) -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">isEquivalent</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350589"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350589"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span id="local-6989586621679350587"><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk
</span><a href="#local-6989586621679350587"><span class="hs-identifier hs-var">ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-181"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350586"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350586"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span id="local-6989586621679350585"><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk
</span><a href="#local-6989586621679350585"><span class="hs-identifier hs-var">ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-182"></span><span>                  </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350589"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350586"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk -&gt; Int
forall a. TraceLedgerReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk
</span><a href="#local-6989586621679350587"><span class="hs-identifier hs-var">ev1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk -&gt; Int
forall a. TraceLedgerReplayEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexReplType"><span class="hs-identifier hs-var">indexReplType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk
</span><a href="#local-6989586621679350585"><span class="hs-identifier hs-var">ev2</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350583"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350583"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350581"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350581"><span class="hs-identifier hs-var">ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350580"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350580"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350579"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350579"><span class="hs-identifier hs-var">ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-185"></span><span>                  </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350583"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350580"><span class="hs-identifier hs-var">s2</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk -&gt; Int
forall a. TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350581"><span class="hs-identifier hs-var">ev1</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk -&gt; Int
forall a. TraceGCEvent a -&gt; Int
</span><a href="Cardano.Tracing.Tracers.html#indexGCType"><span class="hs-identifier hs-var">indexGCType</span></a></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350579"><span class="hs-identifier hs-var">ev2</span></a></span><span>
</span><span id="line-186"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350578"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350578"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350576"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350576"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-188"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350575"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350575"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350574"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350574"><span class="hs-identifier hs-var">_ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350573"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350573"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350572"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350572"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-191"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350571"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350571"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350570"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350570"><span class="hs-identifier hs-var">_ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350569"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350569"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350568"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350568"><span class="hs-identifier hs-var">_ev1</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350567"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350567"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350565"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350565"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350564"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350564"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span id="local-6989586621679350563"><span class="annot"><span class="annottext">TraceGCEvent blk
</span><a href="#local-6989586621679350563"><span class="hs-identifier hs-var">_ev2</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350562"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350562"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350561"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350561"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350560"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350560"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-199"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350559"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350559"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350558"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350558"><span class="hs-identifier hs-var">_s1</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350557"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350557"><span class="hs-identifier hs-var">_s2</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">isEquivalent</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-comment">-- the types to be elided</span><span>
</span><span id="line-204"></span><span>  </span><span id="local-6989586621679350556"><span class="annot"><span class="annottext">doelide :: WithSeverity (TraceEvent blk) -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">doelide</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceLedgerReplayEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.IgnoreBlockOlderThanK</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.IgnoreInvalidBlock</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InvalidBlockReason blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.BlockInTheFuture</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.StoreButDontChange</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TrySwitchToAFork</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">ChainDiff (HeaderFields blk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.SwitchedToAFork</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddBlockValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InvalidBlock</span></span><span> </span><span class="annot"><span class="annottext">ExtValidationError blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddBlockValidation</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.InvalidCandidate</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-214"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddBlockValidation</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.CandidateContainsFutureBlocksExceedingClockSkew</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span> </span><span id="local-6989586621679350543"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679350543"><span class="hs-identifier hs-var">events</span></a></span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span>  </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[LedgerEvent blk] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679350543"><span class="hs-identifier hs-var">events</span></a></span><span>
</span><span id="line-216"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">doelide</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-219"></span><span>  </span><span id="local-6989586621679350541"><span class="annot"><span class="annottext">conteliding :: TracingVerbosity
-&gt; Trace IO t
-&gt; WithSeverity (TraceEvent blk)
-&gt; (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">conteliding</span></span></span><span> </span><span id="local-6989586621679350539"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350539"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350538"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350538"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350537"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350537"><span class="hs-identifier hs-var">_count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350536"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350536"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679350535"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350535"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350534"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350534"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350533"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679350533"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350532"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350532"><span class="hs-identifier hs-var">oldt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-221"></span><span>      </span><span id="local-6989586621679350531"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350531"><span class="hs-identifier hs-var">tnow</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; IO Word64 -&gt; IO Integer
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">IO Word64
</span><span class="hs-identifier hs-var">getMonotonicTimeNSec</span></span><span>
</span><span id="line-222"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350529"><span class="annot"><span class="annottext">deltat :: Integer
</span><a href="#local-6989586621679350529"><span class="hs-identifier hs-var hs-var">deltat</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350531"><span class="hs-identifier hs-var">tnow</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350532"><span class="hs-identifier hs-var">oldt</span></a></span><span>
</span><span id="line-223"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350529"><span class="hs-identifier hs-var">deltat</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1250000000</span></span><span> </span><span class="hs-comment">-- report at most every 1250 ms</span><span>
</span><span id="line-224"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-225"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO t -&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350536"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350535"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350534"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-226"></span><span>          </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350534"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350531"><span class="hs-identifier hs-var">tnow</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350534"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350532"><span class="hs-identifier hs-var">oldt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350525"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350525"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350524"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350524"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679350523"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350523"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350522"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679350522"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350521"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350521"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-229"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350523"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350521"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350520"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350520"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350519"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350519"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679350518"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350518"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceCopyToImmutableDBEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceCopyToImmutableDBEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350517"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679350517"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350516"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350516"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-231"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350518"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350516"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350515"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350515"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350514"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350514"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span id="local-6989586621679350513"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350513"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceGCEvent</span></span><span> </span><span class="annot"><span class="annottext">TraceGCEvent blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350512"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679350512"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350511"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350511"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-233"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350513"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350511"><span class="hs-identifier hs-var">count</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350510"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350510"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350509"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350509"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350508"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350508"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceLedgerReplayEvent</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerDB.ReplayedBlock</span></span><span> </span><span id="local-6989586621679350507"><span class="annot"><span class="annottext">RealPoint blk
</span><a href="#local-6989586621679350507"><span class="hs-identifier hs-var">pt</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span id="local-6989586621679350506"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679350506"><span class="hs-identifier hs-var">replayTo</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350505"><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
</span><a href="#local-6989586621679350505"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350504"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350504"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-235"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350503"><span class="annot"><span class="annottext">slotno :: Integer
</span><a href="#local-6989586621679350503"><span class="hs-identifier hs-var hs-var">slotno</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RealPoint blk -&gt; SlotNo
forall blk. RealPoint blk -&gt; SlotNo
</span><span class="hs-identifier hs-var">realPointSlot</span></span><span> </span><span class="annot"><span class="annottext">RealPoint blk
</span><a href="#local-6989586621679350507"><span class="hs-identifier hs-var">pt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-236"></span><span>          </span><span id="local-6989586621679350501"><span class="annot"><span class="annottext">endslot :: Integer
</span><a href="#local-6989586621679350501"><span class="hs-identifier hs-var hs-var">endslot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; (SlotNo -&gt; Word64) -&gt; WithOrigin SlotNo -&gt; Word64
forall b t. b -&gt; (t -&gt; b) -&gt; WithOrigin t -&gt; b
</span><span class="hs-identifier hs-var">withOrigin</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Point blk -&gt; WithOrigin SlotNo
forall block. Point block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">pointSlot</span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679350506"><span class="hs-identifier hs-var">replayTo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>          </span><span id="local-6989586621679350500"><span class="annot"><span class="annottext">startslot :: Integer
</span><a href="#local-6989586621679350500"><span class="hs-identifier hs-var hs-var">startslot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350504"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350503"><span class="hs-identifier hs-var">slotno</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; Integer
</span><span class="hs-identifier hs-var">toInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350504"><span class="hs-identifier hs-var">count</span></a></span><span>
</span><span id="line-238"></span><span>          </span><span id="local-6989586621679350499"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679350499"><span class="hs-identifier hs-var">progress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350503"><span class="hs-identifier hs-var">slotno</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">100.0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350503"><span class="hs-identifier hs-var">slotno</span></a></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350501"><span class="hs-identifier hs-var">endslot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-239"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350504"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350503"><span class="hs-identifier hs-var">slotno</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350500"><span class="hs-identifier hs-var">startslot</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>  </span><span class="hs-comment">-- report every 1000th slot</span><span>
</span><span id="line-240"></span><span>          </span><span id="local-6989586621679350493"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350493"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk) -&gt; Severity
forall a. HasSeverityAnnotation a =&gt; a -&gt; Severity
</span><span class="hs-identifier hs-var">getSeverityAnnotation</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350508"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk) -&gt; PrivacyAnnotation
forall a. HasPrivacyAnnotation a =&gt; a -&gt; PrivacyAnnotation
</span><span class="hs-identifier hs-var">getPrivacyAnnotation</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350508"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>          </span><span class="annot"><span class="annottext">Trace IO t -&gt; (LOMeta, LOContent t) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350509"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350493"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent t
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;block replay progress (%)&quot;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Measurable
</span><span class="hs-identifier hs-var">PureD</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Double
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Integer
forall a b. (RealFrac a, Integral b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">round</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679350499"><span class="hs-identifier hs-var">progress</span></a></span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">*</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">10.0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Double -&gt; Double -&gt; Double
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><span class="hs-number">10.0</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
-&gt; Maybe (WithSeverity (TraceEvent blk))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350508"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer
forall a. Num a =&gt; Integer -&gt; a
</span><span class="hs-identifier hs-var">fromInteger</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350500"><span class="hs-identifier hs-var">startslot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-243"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; IO (Maybe (WithSeverity (TraceEvent blk)), Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (WithSeverity (TraceEvent blk))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-244"></span><span>
</span><span id="line-245"></span><span id="local-6989586621679350485"><span id="local-6989586621679350486"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679350472"><span id="local-6989586621679350474"><span id="local-6989586621679350476"><span id="local-6989586621679350479"><span id="local-6989586621679350481"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">StandardHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679350486"><span class="hs-identifier hs-type">header</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679350485"><span class="hs-identifier hs-type">peer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ElidingTracer</span></span><span>
</span><span id="line-246"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350485"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="annot"><a href="#local-6989586621679350486"><span class="hs-identifier hs-type">header</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-247"></span><span>  </span><span class="hs-comment">-- equivalent by type and severity</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621679350471"><span class="annot"><span class="annottext">isEquivalent :: WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Bool
</span><a href="#local-6989586621679350471"><span class="hs-identifier hs-var hs-var hs-var hs-var">isEquivalent</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350470"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350470"><span class="hs-identifier hs-var">s1</span></a></span></span><span> </span><span id="local-6989586621679350469"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350469"><span class="hs-identifier hs-var">_peers1</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-249"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350468"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350468"><span class="hs-identifier hs-var">s2</span></a></span></span><span> </span><span id="local-6989586621679350467"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350467"><span class="hs-identifier hs-var">_peers2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350470"><span class="hs-identifier hs-var">s1</span></a></span><span> </span><span class="annot"><span class="annottext">Severity -&gt; Severity -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350468"><span class="hs-identifier hs-var">s2</span></a></span><span>
</span><span id="line-250"></span><span>  </span><span class="hs-comment">-- the types to be elided</span><span>
</span><span id="line-251"></span><span>  </span><span id="local-6989586621679350466"><span class="annot"><span class="annottext">doelide :: WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Bool
</span><a href="#local-6989586621679350466"><span class="hs-identifier hs-var hs-var hs-var hs-var">doelide</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350465"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350465"><span class="hs-identifier hs-var">peers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350984"><span class="annot"><a href="#local-6989586621679350464"><span class="hs-identifier hs-type">checkDecision</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350485"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FetchDecline</span></span><span> </span><span class="annot"><a href="#local-6989586621679350984"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-253"></span><span>        </span><span id="local-6989586621679350464"><span class="annot"><span class="annottext">checkDecision :: TraceLabelPeer peer (Either FetchDecline result) -&gt; Bool
</span><a href="#local-6989586621679350464"><span class="hs-identifier hs-var hs-var">checkDecision</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679350462"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679350462"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">FetchDecline
</span><span class="hs-identifier hs-var">FetchDeclineChainNotPlausible</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-254"></span><span>        </span><span class="annot"><a href="#local-6989586621679350464"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679350460"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679350460"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDeclineConcurrencyLimit</span></span><span> </span><span class="annot"><span class="annottext">FetchMode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-255"></span><span>        </span><span class="annot"><a href="#local-6989586621679350464"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span id="local-6989586621679350458"><span class="annot"><span class="annottext">peer
</span><a href="#local-6989586621679350458"><span class="hs-identifier hs-var">_peer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDeclinePeerBusy</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-256"></span><span>        </span><span class="annot"><a href="#local-6989586621679350464"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer peer (Either FetchDecline result)
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(TraceLabelPeer peer (FetchDecision [Point header]) -&gt; Bool)
-&gt; [TraceLabelPeer peer (FetchDecision [Point header])] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer peer (FetchDecision [Point header]) -&gt; Bool
forall result.
TraceLabelPeer peer (Either FetchDecline result) -&gt; Bool
</span><a href="#local-6989586621679350464"><span class="hs-identifier hs-var">checkDecision</span></a></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350465"><span class="hs-identifier hs-var">peers</span></a></span><span>
</span><span id="line-258"></span><span>  </span><span id="local-6989586621679350455"><span class="annot"><span class="annottext">conteliding :: TracingVerbosity
-&gt; Trace IO t
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; (Maybe
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point header])]),
    Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
</span><a href="#local-6989586621679350455"><span class="hs-identifier hs-var hs-var hs-var hs-var">conteliding</span></a></span></span><span> </span><span id="local-6989586621679350454"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350454"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350453"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350453"><span class="hs-identifier hs-var">_tr</span></a></span></span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350452"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350452"><span class="hs-identifier hs-var">_count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point header])]),
 Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">conteliding</span></span><span> </span><span id="local-6989586621679350451"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350451"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679350450"><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350450"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350449"><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350449"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679350448"><span class="annot"><span class="annottext">Maybe
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
</span><a href="#local-6989586621679350448"><span class="hs-identifier hs-var">_old</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350447"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350447"><span class="hs-identifier hs-var">count</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-260"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350447"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350447"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Integral a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">`mod`</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1000</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>  </span><span class="hs-comment">-- report every 1000th message</span><span>
</span><span id="line-261"></span><span>          </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO t
-&gt; Tracer
     IO
     (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350451"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO t
</span><a href="#local-6989586621679350450"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350449"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-262"></span><span>      </span><span class="annot"><span class="annottext">(Maybe
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point header])]),
 Integer)
-&gt; IO
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point header])]),
      Integer)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
-&gt; Maybe
     (WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])])
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">WithSeverity [TraceLabelPeer peer (FetchDecision [Point header])]
</span><a href="#local-6989586621679350449"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679350447"><span class="hs-identifier hs-var">count</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">1</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span class="hs-comment">-- | Tracers for all system components.</span><span>
</span><span id="line-265"></span><span class="hs-comment">--</span><span>
</span><span id="line-266"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-type">mkTracers</span></a></span><span>
</span><span id="line-267"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350445"><span class="annot"><a href="#local-6989586621679350445"><span class="hs-identifier hs-type">peer</span></a></span></span><span> </span><span id="local-6989586621679350444"><span class="annot"><a href="#local-6989586621679350444"><span class="hs-identifier hs-type">localPeer</span></a></span></span><span> </span><span id="local-6989586621679350443"><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-268"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-269"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-270"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Constraints.html#TraceConstraints"><span class="hs-identifier hs-type">TraceConstraints</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-271"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350445"><span class="hs-identifier hs-type">peer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679350445"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-272"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350444"><span class="hs-identifier hs-type">localPeer</span></a></span><span>
</span><span id="line-273"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier hs-type">TraceOptions</span></a></span><span>
</span><span id="line-275"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-276"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Kernel.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-277"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350445"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350444"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350443"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-278"></span><span id="mkTracers"><span class="annot"><span class="annottext">mkTracers :: TraceOptions
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; IO (Tracers peer localPeer blk)
</span><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-var hs-var">mkTracers</span></a></span></span><span> </span><span id="local-6989586621679350442"><span class="annot"><span class="annottext">tOpts :: TraceOptions
</span><a href="#local-6989586621679350442"><span class="hs-identifier hs-var">tOpts</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TracingOn"><span class="hs-identifier hs-type">TracingOn</span></a></span><span> </span><span id="local-6989586621679350440"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679350439"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350438"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350438"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-279"></span><span>  </span><span id="local-6989586621679350437"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350437"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ForgingStats
</span><a href="Cardano.Tracing.Metrics.html#mkForgingStats"><span class="hs-identifier hs-var">mkForgingStats</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span id="local-6989586621679350435"><span class="annot"><span class="annottext">Tracers' peer localPeer blk (Tracer IO)
</span><a href="#local-6989586621679350435"><span class="hs-identifier hs-var">consensusTracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
forall blk peer localPeer.
(Show peer, Eq peer, LedgerQueries blk, ToJSON (GenTxId blk),
 ToObject (ApplyTxErr blk), ToObject (CannotForge blk),
 ToObject (GenTx blk), ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk), RunNode blk,
 HasKESMetricsData blk, Show (Header blk)) =&gt;
TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
</span><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-var">mkConsensusTracers</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350438"><span class="hs-identifier hs-var">nodeKern</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350437"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679350432"><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679350432"><span class="hs-identifier hs-var">elidedChainDB</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (MVar (Maybe (WithSeverity (TraceEvent blk)), Integer))
forall a. ElidingTracer a =&gt; IO (MVar (Maybe a, Integer))
</span><span class="hs-identifier hs-var">newstate</span></span><span>  </span><span class="hs-comment">-- for eliding messages in ChainDB tracer</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; IO (Tracers peer localPeer blk)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk.
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracer IO (WithIPList (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName DnsTrace)
-&gt; Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
-&gt; Tracer IO AcceptConnectionsPolicyTrace
-&gt; Tracer IO (WithMuxBearer peer MuxTrace)
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO DiffusionInitializationTracer
-&gt; Tracers peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainDB
-&gt; Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainDB
</span><a href="Cardano.Tracing.Config.html#traceChainDB"><span class="hs-identifier hs-var hs-var">traceChainDB</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk) -&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-285"></span><span>        </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceEvent blk))
 -&gt; Tracer IO (TraceEvent blk))
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
-&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall blk.
(ConvertRawHash blk, LedgerSupportsProtocol blk, InspectLedger blk,
 ToObject (Header blk), ToObject (LedgerEvent blk)) =&gt;
TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var">teeTraceChainTip</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="#local-6989586621679350442"><span class="hs-identifier hs-var">tOpts</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679350432"><span class="hs-identifier hs-var">elidedChainDB</span></a></span><span>
</span><span id="line-286"></span><span>                             </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainDB&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers' peer localPeer blk (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers' peer localPeer blk (Tracer IO)
</span><a href="#local-6989586621679350435"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers IO localPeer blk DeserialiseFailure
forall blk localPeer.
(StandardHash blk, Show (ApplyTxErr blk), Show (GenTx blk),
 Show localPeer, ShowQuery (Query blk)) =&gt;
TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' localPeer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-var">nodeToClientTracers'</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers IO peer blk DeserialiseFailure
forall blk peer.
(RunNode blk, ConvertTxId blk, HasTxs blk, Show blk,
 Show (Header blk), Show peer) =&gt;
TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' peer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-var">nodeToNodeTracers'</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ipSubscriptionTracer :: Tracer IO (WithIPList (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#ipSubscriptionTracer"><span class="hs-identifier hs-var">ipSubscriptionTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceIpSubscription
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithIPList (SubscriptionTrace SockAddr))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceIpSubscription
</span><a href="Cardano.Tracing.Config.html#traceIpSubscription"><span class="hs-identifier hs-var hs-var">traceIpSubscription</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;IpSubscription&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsSubscriptionTracer :: Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#dnsSubscriptionTracer"><span class="hs-identifier hs-var">dnsSubscriptionTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span>  </span><span class="annot"><span class="annottext">OnOff TraceDnsSubscription
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDnsSubscription
</span><a href="Cardano.Tracing.Config.html#traceDnsSubscription"><span class="hs-identifier hs-var hs-var">traceDnsSubscription</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DnsSubscription&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsResolverTracer :: Tracer IO (WithDomainName DnsTrace)
</span><a href="Cardano.Tracing.Tracers.html#dnsResolverTracer"><span class="hs-identifier hs-var">dnsResolverTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceDnsResolver
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithDomainName DnsTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDnsResolver
</span><a href="Cardano.Tracing.Config.html#traceDnsResolver"><span class="hs-identifier hs-var hs-var">traceDnsResolver</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DnsResolver&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errorPolicyTracer :: Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#errorPolicyTracer"><span class="hs-identifier hs-var">errorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceErrorPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceErrorPolicy
</span><a href="Cardano.Tracing.Config.html#traceErrorPolicy"><span class="hs-identifier hs-var hs-var">traceErrorPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ErrorPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localErrorPolicyTracer :: Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#localErrorPolicyTracer"><span class="hs-identifier hs-var">localErrorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceLocalErrorPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalErrorPolicy
</span><a href="Cardano.Tracing.Config.html#traceLocalErrorPolicy"><span class="hs-identifier hs-var hs-var">traceLocalErrorPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalErrorPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">acceptPolicyTracer :: Tracer IO AcceptConnectionsPolicyTrace
</span><a href="Cardano.Tracing.Tracers.html#acceptPolicyTracer"><span class="hs-identifier hs-var">acceptPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceAcceptPolicy
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO AcceptConnectionsPolicyTrace
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceAcceptPolicy
</span><a href="Cardano.Tracing.Config.html#traceAcceptPolicy"><span class="hs-identifier hs-var hs-var">traceAcceptPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;AcceptPolicy&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">muxTracer :: Tracer IO (WithMuxBearer peer MuxTrace)
</span><a href="Cardano.Tracing.Tracers.html#muxTracer"><span class="hs-identifier hs-var">muxTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceMux
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithMuxBearer peer MuxTrace)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceMux
</span><a href="Cardano.Tracing.Config.html#traceMux"><span class="hs-identifier hs-var hs-var">traceMux</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mux&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">handshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#handshakeTracer"><span class="hs-identifier hs-var">handshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceHandshake
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO HandshakeTr
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceHandshake
</span><a href="Cardano.Tracing.Config.html#traceHandshake"><span class="hs-identifier hs-var hs-var">traceHandshake</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Handshake&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localHandshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#localHandshakeTracer"><span class="hs-identifier hs-var">localHandshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceLocalHandshake
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO HandshakeTr
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalHandshake
</span><a href="Cardano.Tracing.Config.html#traceLocalHandshake"><span class="hs-identifier hs-var hs-var">traceLocalHandshake</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalHandshake&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionInitializationTracer :: Tracer IO DiffusionInitializationTracer
</span><a href="Cardano.Tracing.Tracers.html#diffusionInitializationTracer"><span class="hs-identifier hs-var">diffusionInitializationTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceDiffusionInitialization
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO DiffusionInitializationTracer
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceDiffusionInitialization
</span><a href="Cardano.Tracing.Config.html#traceDiffusionInitialization"><span class="hs-identifier hs-var hs-var">traceDiffusionInitialization</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;DiffusionInitializationTracer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350439"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-301"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-302"></span><span>   </span><span class="annot"><a href="#local-6989586621679350433"><span class="hs-identifier hs-type">verb</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-303"></span><span>   </span><span id="local-6989586621679350433"><span class="annot"><span class="annottext">verb :: TracingVerbosity
</span><a href="#local-6989586621679350433"><span class="hs-identifier hs-var hs-var">verb</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350440"><span class="hs-identifier hs-var">trSel</span></a></span><span>
</span><span id="line-304"></span><span>
</span><span id="line-305"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkTracers"><span class="hs-identifier hs-var">mkTracers</span></a></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="Cardano.Tracing.Config.html#TracingOff"><span class="hs-identifier hs-var">TracingOff</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><span class="annottext">Tracers peer localPeer blk -&gt; IO (Tracers peer localPeer blk)
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer localPeer blk.
Tracer IO (TraceEvent blk)
-&gt; Tracers IO peer localPeer blk
-&gt; Tracers IO peer blk DeserialiseFailure
-&gt; Tracers IO localPeer blk DeserialiseFailure
-&gt; Tracer IO (WithIPList (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
-&gt; Tracer IO (WithDomainName DnsTrace)
-&gt; Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
-&gt; Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
-&gt; Tracer IO AcceptConnectionsPolicyTrace
-&gt; Tracer IO (WithMuxBearer peer MuxTrace)
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO HandshakeTr
-&gt; Tracer IO DiffusionInitializationTracer
-&gt; Tracers peer localPeer blk
</span><a href="Cardano.Tracing.Tracers.html#Tracers"><span class="hs-identifier hs-type">Tracers</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainDBTracer :: Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#chainDBTracer"><span class="hs-identifier hs-var">chainDBTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">consensusTracers :: Tracers' peer localPeer blk (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#consensusTracers"><span class="hs-identifier hs-var">consensusTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall remotePeer localPeer blk (f :: * -&gt; *).
f (TraceChainSyncClientEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f [TraceLabelPeer
        remotePeer (FetchDecision [Point (Header blk)])]
-&gt; f (TraceLabelPeer
        remotePeer (TraceFetchClientState (Header blk)))
-&gt; f (TraceBlockFetchServerEvent blk)
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLocalTxSubmissionServerEvent blk)
-&gt; f (TraceEventMempool blk)
-&gt; f (TraceLabelCreds (TraceForgeEvent blk))
-&gt; f (TraceBlockchainTimeEvent UTCTime)
-&gt; f (TraceLabelCreds (ForgeStateInfo blk))
-&gt; f (TraceKeepAliveClient remotePeer)
-&gt; Tracers' remotePeer localPeer blk f
</span><span class="hs-identifier hs-type">Consensus.Tracers</span></span><span>
</span><span id="line-309"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainSyncClientTracer :: Tracer IO (TraceChainSyncClientEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncClientEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-310"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerHeaderTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerHeaderTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-311"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerBlockTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerBlockTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-312"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchDecisionTracer :: Tracer
  IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><span class="hs-identifier hs-var">Consensus.blockFetchDecisionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-313"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchClientTracer :: Tracer
  IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
</span><span class="hs-identifier hs-var">Consensus.blockFetchClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-314"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchServerTracer :: Tracer IO (TraceBlockFetchServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.blockFetchServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-315"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeStateInfoTracer :: Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><span class="hs-identifier hs-var">Consensus.forgeStateInfoTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-316"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txInboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txInboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-317"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txOutboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txOutboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-318"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionServerTracer :: Tracer IO (TraceLocalTxSubmissionServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.localTxSubmissionServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLocalTxSubmissionServerEvent blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-319"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mempoolTracer :: Tracer IO (TraceEventMempool blk)
</span><span class="hs-identifier hs-var">Consensus.mempoolTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-320"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeTracer :: Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><span class="hs-identifier hs-var">Consensus.forgeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-321"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockchainTimeTracer :: Tracer IO (TraceBlockchainTimeEvent UTCTime)
</span><span class="hs-identifier hs-var">Consensus.blockchainTimeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-322"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">keepAliveClientTracer :: Tracer IO (TraceKeepAliveClient peer)
</span><span class="hs-identifier hs-var">Consensus.keepAliveClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (TraceKeepAliveClient peer)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-323"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-324"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToClientTracers :: Tracers IO localPeer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers"><span class="hs-identifier hs-var">nodeToClientTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToClient.Tracers</span></span><span>
</span><span id="line-325"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-326"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-327"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tStateQueryTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tStateQueryTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-328"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">nodeToNodeTracers :: Tracers IO peer blk DeserialiseFailure
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers"><span class="hs-identifier hs-var">nodeToNodeTracers</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch blk (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToNode.Tracers</span></span><span>
</span><span id="line-330"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-331"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tChainSyncSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-332"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchTracer :: Tracer
  IO
  (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-333"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-334"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-335"></span><span>      </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmission2Tracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmission2Tracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-336"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ipSubscriptionTracer :: Tracer IO (WithIPList (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#ipSubscriptionTracer"><span class="hs-identifier hs-var">ipSubscriptionTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithIPList (SubscriptionTrace SockAddr))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-338"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsSubscriptionTracer :: Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
</span><a href="Cardano.Tracing.Tracers.html#dnsSubscriptionTracer"><span class="hs-identifier hs-var">dnsSubscriptionTracer</span></a></span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithDomainName (SubscriptionTrace SockAddr))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">dnsResolverTracer :: Tracer IO (WithDomainName DnsTrace)
</span><a href="Cardano.Tracing.Tracers.html#dnsResolverTracer"><span class="hs-identifier hs-var">dnsResolverTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithDomainName DnsTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">errorPolicyTracer :: Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#errorPolicyTracer"><span class="hs-identifier hs-var">errorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithAddr SockAddr ErrorPolicyTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localErrorPolicyTracer :: Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
</span><a href="Cardano.Tracing.Tracers.html#localErrorPolicyTracer"><span class="hs-identifier hs-var">localErrorPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithAddr LocalAddress ErrorPolicyTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">acceptPolicyTracer :: Tracer IO AcceptConnectionsPolicyTrace
</span><a href="Cardano.Tracing.Tracers.html#acceptPolicyTracer"><span class="hs-identifier hs-var">acceptPolicyTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO AcceptConnectionsPolicyTrace
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">muxTracer :: Tracer IO (WithMuxBearer peer MuxTrace)
</span><a href="Cardano.Tracing.Tracers.html#muxTracer"><span class="hs-identifier hs-var">muxTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithMuxBearer peer MuxTrace)
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">handshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#handshakeTracer"><span class="hs-identifier hs-var">handshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO HandshakeTr
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localHandshakeTracer :: Tracer IO HandshakeTr
</span><a href="Cardano.Tracing.Tracers.html#localHandshakeTracer"><span class="hs-identifier hs-var">localHandshakeTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO HandshakeTr
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">diffusionInitializationTracer :: Tracer IO DiffusionInitializationTracer
</span><a href="Cardano.Tracing.Tracers.html#diffusionInitializationTracer"><span class="hs-identifier hs-var">diffusionInitializationTracer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO DiffusionInitializationTracer
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-348"></span><span>
</span><span id="line-349"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- Chain DB Tracers</span><span>
</span><span id="line-351"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-352"></span><span>
</span><span id="line-353"></span><span id="local-6989586621679350949"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-type">teeTraceChainTip</span></a></span><span>
</span><span id="line-354"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConvertRawHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-355"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-356"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InspectLedger</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-357"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-358"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-359"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceOptions"><span class="hs-identifier hs-type">TraceOptions</span></a></span><span>
</span><span id="line-361"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350949"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-365"></span><span id="teeTraceChainTip"><span class="annot"><span class="annottext">teeTraceChainTip :: TraceOptions
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var hs-var">teeTraceChainTip</span></a></span></span><span> </span><span class="annot"><span class="annottext">TraceOptions
</span><a href="Cardano.Tracing.Config.html#TracingOff"><span class="hs-identifier hs-var">TracingOff</span></a></span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-366"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTip"><span class="hs-identifier hs-var">teeTraceChainTip</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#TracingOn"><span class="hs-identifier hs-type">TracingOn</span></a></span><span> </span><span id="local-6989586621679350385"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350385"><span class="hs-identifier hs-var">trSel</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679350384"><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679350384"><span class="hs-identifier hs-var">elided</span></a></span></span><span> </span><span id="local-6989586621679350383"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350383"><span class="hs-identifier hs-var">trTrc</span></a></span></span><span> </span><span id="local-6989586621679350382"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350382"><span class="hs-identifier hs-var">trMet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity (TraceEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceEvent blk) -&gt; IO ())
 -&gt; Tracer IO (WithSeverity (TraceEvent blk)))
-&gt; (WithSeverity (TraceEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350380"><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350380"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-368"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall blk.
(ConvertRawHash blk, LedgerSupportsProtocol blk, InspectLedger blk,
 ToObject (Header blk), ToObject (LedgerEvent blk)) =&gt;
TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-var">teeTraceChainTipElide</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350385"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
</span><a href="#local-6989586621679350384"><span class="hs-identifier hs-var">elided</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350383"><span class="hs-identifier hs-var">trTrc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350380"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEvent blk))
-&gt; WithSeverity (TraceEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (TraceEvent blk)
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a. Tracer IO a -&gt; Tracer IO (WithSeverity a)
</span><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-var">ignoringSeverity</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceEvent blk)
forall blk.
HasHeader (Header blk) =&gt;
Trace IO Text -&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-var">traceChainMetrics</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350382"><span class="hs-identifier hs-var">trMet</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceEvent blk)
</span><a href="#local-6989586621679350380"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span id="local-6989586621679350882"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-type">teeTraceChainTipElide</span></a></span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ConvertRawHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-373"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LedgerSupportsProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-374"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">InspectLedger</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-375"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-378"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-379"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-380"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-381"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350882"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-382"></span><span id="teeTraceChainTipElide"><span class="annot"><span class="annottext">teeTraceChainTipElide :: TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-identifier hs-var hs-var">teeTraceChainTipElide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar (Maybe (WithSeverity (TraceEvent blk)), Integer)
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEvent blk))
forall a t.
(ElidingTracer a, ToObject t, Transformable t IO a) =&gt;
TracingVerbosity
-&gt; MVar (Maybe a, Integer) -&gt; Trace IO t -&gt; Tracer IO a
</span><span class="hs-identifier hs-var">elideToLogObject</span></span><span>
</span><span id="line-383"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceChainTipElide"><span class="hs-pragma hs-type">teeTraceChainTipElide</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span id="local-6989586621679350881"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-type">ignoringSeverity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350881"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><a href="#local-6989586621679350881"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-386"></span><span id="ignoringSeverity"><span class="annot"><span class="annottext">ignoringSeverity :: Tracer IO a -&gt; Tracer IO (WithSeverity a)
</span><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-identifier hs-var hs-var">ignoringSeverity</span></a></span></span><span> </span><span id="local-6989586621679350375"><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679350375"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a))
-&gt; (WithSeverity a -&gt; IO ()) -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350374"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679350374"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO a -&gt; a -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679350375"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679350374"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-387"></span><span class="hs-pragma">{-# INLINE</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ignoringSeverity"><span class="hs-pragma hs-type">ignoringSeverity</span></a></span><span> </span><span class="hs-pragma">#-}</span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-type">traceChainMetrics</span></a></span><span>
</span><span id="line-390"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350880"><span class="annot"><a href="#local-6989586621679350880"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350880"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-391"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350880"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-392"></span><span id="traceChainMetrics"><span class="annot"><span class="annottext">traceChainMetrics :: Trace IO Text -&gt; Tracer IO (TraceEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#traceChainMetrics"><span class="hs-identifier hs-var hs-var">traceChainMetrics</span></a></span></span><span> </span><span id="local-6989586621679350373"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk))
-&gt; (TraceEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350372"><span class="annot"><span class="annottext">TraceEvent blk
</span><a href="#local-6989586621679350372"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-393"></span><span>  </span><span class="annot"><span class="annottext">IO () -&gt; Maybe (IO ()) -&gt; IO ()
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (IO ()) -&gt; IO ()) -&gt; Maybe (IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-394"></span><span>    </span><span class="annot"><span class="annottext">ChainInformation -&gt; IO ()
</span><a href="#local-6989586621679350370"><span class="hs-identifier hs-var">doTrace</span></a></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; IO ())
-&gt; Maybe ChainInformation -&gt; Maybe (IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk -&gt; Maybe ChainInformation
</span><a href="#local-6989586621679350369"><span class="hs-identifier hs-var">chainTipInformation</span></a></span><span> </span><span class="annot"><span class="annottext">TraceEvent blk
</span><a href="#local-6989586621679350372"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-395"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-396"></span><span>   </span><span class="annot"><a href="#local-6989586621679350369"><span class="hs-identifier hs-type">chainTipInformation</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350880"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-397"></span><span>   </span><span id="local-6989586621679350369"><span class="annot"><span class="annottext">chainTipInformation :: TraceEvent blk -&gt; Maybe ChainInformation
</span><a href="#local-6989586621679350369"><span class="hs-identifier hs-var hs-var">chainTipInformation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-398"></span><span>     </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.TraceAddBlockEvent</span></span><span> </span><span id="local-6989586621679350368"><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><a href="#local-6989586621679350368"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><a href="#local-6989586621679350368"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-399"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.SwitchedToAFork</span></span><span> </span><span id="local-6989586621679350367"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679350367"><span class="hs-identifier hs-var">_warnings</span></a></span></span><span> </span><span id="local-6989586621679350366"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350366"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350365"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350365"><span class="hs-identifier hs-var">newChain</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-400"></span><span>         </span><span class="annot"><span class="annottext">ChainInformation -&gt; Maybe ChainInformation
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; Maybe ChainInformation)
-&gt; ChainInformation -&gt; Maybe ChainInformation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; AnchoredFragment (Header blk) -&gt; ChainInformation
forall blk.
HasHeader (Header blk) =&gt;
NewTipInfo blk -&gt; AnchoredFragment (Header blk) -&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var">chainInformation</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350366"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350365"><span class="hs-identifier hs-var">newChain</span></a></span><span>
</span><span id="line-401"></span><span>       </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.AddedToCurrentChain</span></span><span> </span><span id="local-6989586621679350363"><span class="annot"><span class="annottext">[LedgerEvent blk]
</span><a href="#local-6989586621679350363"><span class="hs-identifier hs-var">_warnings</span></a></span></span><span> </span><span id="local-6989586621679350362"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350362"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350361"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350361"><span class="hs-identifier hs-var">newChain</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-402"></span><span>         </span><span class="annot"><span class="annottext">ChainInformation -&gt; Maybe ChainInformation
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ChainInformation -&gt; Maybe ChainInformation)
-&gt; ChainInformation -&gt; Maybe ChainInformation
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; AnchoredFragment (Header blk) -&gt; ChainInformation
forall blk.
HasHeader (Header blk) =&gt;
NewTipInfo blk -&gt; AnchoredFragment (Header blk) -&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var">chainInformation</span></a></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350362"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350361"><span class="hs-identifier hs-var">newChain</span></a></span><span>
</span><span id="line-403"></span><span>       </span><span class="annot"><span class="annottext">TraceAddBlockEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainInformation
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-404"></span><span>     </span><span class="annot"><span class="annottext">TraceEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe ChainInformation
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-405"></span><span>
</span><span id="line-406"></span><span>   </span><span class="annot"><a href="#local-6989586621679350370"><span class="hs-identifier hs-type">doTrace</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>   </span><span id="local-6989586621679350370"><span class="annot"><span class="annottext">doTrace :: ChainInformation -&gt; IO ()
</span><a href="#local-6989586621679350370"><span class="hs-identifier hs-var hs-var">doTrace</span></a></span></span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span id="local-6989586621679350359"><span class="annot"><span class="annottext">Word64
slots :: ChainInformation -&gt; Word64
slots :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350357"><span class="annot"><span class="annottext">Word64
blocks :: ChainInformation -&gt; Word64
blocks :: Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var hs-var">blocks</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350355"><span class="annot"><span class="annottext">Rational
density :: ChainInformation -&gt; Rational
density :: Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var hs-var">density</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350353"><span class="annot"><span class="annottext">EpochNo
epoch :: ChainInformation -&gt; EpochNo
epoch :: EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var hs-var">epoch</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350351"><span class="annot"><span class="annottext">Word64
slotInEpoch :: ChainInformation -&gt; Word64
slotInEpoch :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var hs-var">slotInEpoch</span></a></span></span><span> </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-408"></span><span>     </span><span class="hs-comment">-- TODO this is executed each time the chain changes. How cheap is it?</span><span>
</span><span id="line-409"></span><span>     </span><span id="local-6989586621679350349"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
forall a. Trace IO a -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-var">traceD</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;density&quot;</span></span><span>     </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Double
forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679350355"><span class="hs-identifier hs-var">density</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-412"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotNum&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350359"><span class="hs-identifier hs-var">slots</span></a></span><span>
</span><span id="line-413"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockNum&quot;</span></span><span>    </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350357"><span class="hs-identifier hs-var">blocks</span></a></span><span>
</span><span id="line-414"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotInEpoch&quot;</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350351"><span class="hs-identifier hs-var">slotInEpoch</span></a></span><span>
</span><span id="line-415"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Word64 -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350373"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350349"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;epoch&quot;</span></span><span>       </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EpochNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unEpochNo</span></span><span> </span><span class="annot"><span class="annottext">EpochNo
</span><a href="#local-6989586621679350353"><span class="hs-identifier hs-var">epoch</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span id="local-6989586621679350871"><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-type">traceD</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350871"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Double</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-418"></span><span id="traceD"><span class="annot"><span class="annottext">traceD :: Trace IO a -&gt; LOMeta -&gt; Text -&gt; Double -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceD"><span class="hs-identifier hs-var hs-var">traceD</span></a></span></span><span> </span><span id="local-6989586621679350343"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350343"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350342"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350342"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span id="local-6989586621679350341"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350341"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679350340"><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679350340"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350343"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350342"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350341"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Double -&gt; Measurable
</span><span class="hs-identifier hs-var">PureD</span></span><span> </span><span class="annot"><span class="annottext">Double
</span><a href="#local-6989586621679350340"><span class="hs-identifier hs-var">d</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-419"></span><span>
</span><span id="line-420"></span><span id="local-6989586621679350869"><span id="local-6989586621679350870"><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-type">traceI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integral</span></span><span> </span><span class="annot"><a href="#local-6989586621679350870"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350869"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOMeta</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679350870"><span class="hs-identifier hs-type">i</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-421"></span><span id="traceI"><span class="annot"><span class="annottext">traceI :: Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var hs-var">traceI</span></a></span></span><span> </span><span id="local-6989586621679350339"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350339"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350338"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350338"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span id="local-6989586621679350337"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350337"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621679350336"><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679350336"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350339"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350338"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350337"><span class="hs-identifier hs-var">msg</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">i -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">i
</span><a href="#local-6989586621679350336"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-422"></span><span>
</span><span id="line-423"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-424"></span><span class="hs-comment">-- Consensus Tracers</span><span>
</span><span id="line-425"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-426"></span><span>
</span><span id="line-427"></span><span id="local-6989586621679350842"><span class="annot"><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-type">isRollForward</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceChainSyncServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350842"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-428"></span><span id="isRollForward"><span class="annot"><span class="annottext">isRollForward :: TraceChainSyncServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var hs-var">isRollForward</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceChainSyncRollForward</span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-429"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var">isRollForward</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span id="local-6989586621679350831"><span class="annot"><a href="Cardano.Tracing.Tracers.html#isTraceBlockFetchServerBlockCount"><span class="hs-identifier hs-type">isTraceBlockFetchServerBlockCount</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceBlockFetchServerEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350831"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span></span><span>
</span><span id="line-432"></span><span id="isTraceBlockFetchServerBlockCount"><span class="annot"><span class="annottext">isTraceBlockFetchServerBlockCount :: TraceBlockFetchServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isTraceBlockFetchServerBlockCount"><span class="hs-identifier hs-var hs-var">isTraceBlockFetchServerBlockCount</span></a></span></span><span> </span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk
</span><span class="hs-identifier hs-var">TraceBlockFetchServerSendBlock</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-type">mkConsensusTracers</span></a></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350973"><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span></span><span> </span><span id="local-6989586621679350974"><span class="annot"><a href="#local-6989586621679350974"><span class="hs-identifier hs-type">peer</span></a></span></span><span> </span><span id="local-6989586621679350958"><span class="annot"><a href="#local-6989586621679350958"><span class="hs-identifier hs-type">localPeer</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-436"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350974"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-437"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679350974"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-438"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Queries.html#LedgerQueries"><span class="hs-identifier hs-type">LedgerQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-439"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-441"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-442"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-443"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-445"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-448"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-449"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-450"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-452"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-453"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Kernel.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-455"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679350974"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350958"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-457"></span><span id="mkConsensusTracers"><span class="annot"><span class="annottext">mkConsensusTracers :: TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; NodeKernelData blk
-&gt; ForgingStats
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
</span><a href="Cardano.Tracing.Tracers.html#mkConsensusTracers"><span class="hs-identifier hs-var hs-var">mkConsensusTracers</span></a></span></span><span> </span><span id="local-6989586621679350330"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679350329"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350328"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350327"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350327"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span id="local-6989586621679350326"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350326"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-458"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350325"><span class="annot"><span class="annottext">trmet :: Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var hs-var">trmet</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-459"></span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621679350324"><span class="annot"><span class="annottext">Tracer
  IO
  (Either
     (TraceForgeEvent blk)
     (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
-&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="#local-6989586621679350324"><span class="hs-identifier hs-var">blockForgeOutcomeExtractor</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO
  (Tracer
     IO
     (Either
        (TraceForgeEvent blk)
        (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
   -&gt; Tracer IO (TraceForgeEvent blk))
forall (m :: * -&gt; *) a.
(MonadIO m, MonadMask m, Outcome m a) =&gt;
m (OutcomeEnhancedTracer m a -&gt; Tracer m a)
</span><span class="hs-identifier hs-var">mkOutcomeExtractor</span></span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621679350322"><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679350322"><span class="hs-identifier hs-var">elidedFetchDecision</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO
  (MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer))
forall a. ElidingTracer a =&gt; IO (MVar (Maybe a, Integer))
</span><span class="hs-identifier hs-var">newstate</span></span><span>  </span><span class="hs-comment">-- for eliding messages in FetchDecision tr</span><span>
</span><span id="line-462"></span><span>  </span><span id="local-6989586621679350321"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350321"><span class="hs-identifier hs-var">forgeTracers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO ForgeTracers
</span><a href="#local-6989586621679350320"><span class="hs-identifier hs-var">mkForgeTracers</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span id="local-6989586621679350319"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-464"></span><span>
</span><span id="line-465"></span><span>  </span><span id="local-6989586621679350318"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350318"><span class="hs-identifier hs-var">tHeadersServed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">STM.newTVarIO</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-466"></span><span>  </span><span id="local-6989586621679350316"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350316"><span class="hs-identifier hs-var">tBlocksServed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">STM.newTVarIO</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-467"></span><span>  </span><span id="local-6989586621679350315"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350315"><span class="hs-identifier hs-var">tSubmissionsCollected</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">STM.newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-468"></span><span>  </span><span id="local-6989586621679350314"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350314"><span class="hs-identifier hs-var">tSubmissionsAccepted</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">STM.newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-469"></span><span>  </span><span id="local-6989586621679350313"><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350313"><span class="hs-identifier hs-var">tSubmissionsRejected</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Int -&gt; IO (TVar Int)
forall a. a -&gt; IO (TVar a)
</span><span class="hs-identifier hs-var">STM.newTVarIO</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span>  </span><span class="annot"><span class="annottext">Tracers' peer localPeer blk (Tracer IO)
-&gt; IO (Tracers' peer localPeer blk (Tracer IO))
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Tracers :: forall remotePeer localPeer blk (f :: * -&gt; *).
f (TraceChainSyncClientEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f (TraceChainSyncServerEvent blk)
-&gt; f [TraceLabelPeer
        remotePeer (FetchDecision [Point (Header blk)])]
-&gt; f (TraceLabelPeer
        remotePeer (TraceFetchClientState (Header blk)))
-&gt; f (TraceBlockFetchServerEvent blk)
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLabelPeer
        remotePeer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
-&gt; f (TraceLocalTxSubmissionServerEvent blk)
-&gt; f (TraceEventMempool blk)
-&gt; f (TraceLabelCreds (TraceForgeEvent blk))
-&gt; f (TraceBlockchainTimeEvent UTCTime)
-&gt; f (TraceLabelCreds (ForgeStateInfo blk))
-&gt; f (TraceKeepAliveClient remotePeer)
-&gt; Tracers' remotePeer localPeer blk f
</span><span class="hs-identifier hs-type">Consensus.Tracers</span></span><span>
</span><span id="line-472"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">chainSyncClientTracer :: Tracer IO (TraceChainSyncClientEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceChainSyncClientEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncClient
</span><a href="Cardano.Tracing.Config.html#traceChainSyncClient"><span class="hs-identifier hs-var hs-var">traceChainSyncClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-473"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerHeaderTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerHeaderTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncHeaderServer
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncHeaderServer
</span><a href="Cardano.Tracing.Config.html#traceChainSyncHeaderServer"><span class="hs-identifier hs-var hs-var">traceChainSyncHeaderServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceChainSyncServerEvent blk)
 -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-474"></span><span>        </span><span class="annot"><span class="annottext">(TraceChainSyncServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceChainSyncServerEvent blk -&gt; IO ())
 -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; (TraceChainSyncServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350310"><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679350310"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceChainSyncServerEvent blk)
-&gt; TraceChainSyncServerEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
 -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; (Trace IO Text
    -&gt; Tracer IO (WithSeverity (TraceChainSyncServerEvent blk)))
-&gt; Trace IO Text
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceChainSyncServerEvent blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (TraceChainSyncServerEvent blk))
-&gt; Trace IO Text -&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncHeaderServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679350310"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-476"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk -&gt; Bool
forall blk. TraceChainSyncServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isRollForward"><span class="hs-identifier hs-var">isRollForward</span></a></span><span> </span><span class="annot"><span class="annottext">TraceChainSyncServerEvent blk
</span><a href="#local-6989586621679350310"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-477"></span><span>            </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;served.header.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-478"></span><span>              </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350318"><span class="hs-identifier hs-var">tHeadersServed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-479"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">chainSyncServerBlockTracer :: Tracer IO (TraceChainSyncServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.chainSyncServerBlockTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncBlockServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceChainSyncServerEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncBlockServer
</span><a href="Cardano.Tracing.Config.html#traceChainSyncBlockServer"><span class="hs-identifier hs-var hs-var">traceChainSyncBlockServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncBlockServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-480"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchDecisionTracer :: Tracer
  IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><span class="hs-identifier hs-var">Consensus.blockFetchDecisionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchDecisions
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchDecisions
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchDecisions"><span class="hs-identifier hs-var hs-var">traceBlockFetchDecisions</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; Tracer
      IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-481"></span><span>        </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
 -&gt; Tracer
      IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; Tracer
     IO [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
(Eq peer, HasHeader blk, Show peer) =&gt;
TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-var">teeTraceBlockFetchDecision</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679350322"><span class="hs-identifier hs-var">elidedFetchDecision</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-482"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchClientTracer :: Tracer
  IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
</span><span class="hs-identifier hs-var">Consensus.blockFetchClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO (TraceLabelPeer peer (TraceFetchClientState (Header blk)))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchClient
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchClient"><span class="hs-identifier hs-var hs-var">traceBlockFetchClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-483"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockFetchServerTracer :: Tracer IO (TraceBlockFetchServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.blockFetchServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchServer
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchServer
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchServer"><span class="hs-identifier hs-var hs-var">traceBlockFetchServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceBlockFetchServerEvent blk)
 -&gt; Tracer IO (TraceBlockFetchServerEvent blk))
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-484"></span><span>        </span><span class="annot"><span class="annottext">(TraceBlockFetchServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceBlockFetchServerEvent blk -&gt; IO ())
 -&gt; Tracer IO (TraceBlockFetchServerEvent blk))
-&gt; (TraceBlockFetchServerEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350301"><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk
</span><a href="#local-6989586621679350301"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-485"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceBlockFetchServerEvent blk)
-&gt; TraceBlockFetchServerEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceBlockFetchServerEvent blk))
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceBlockFetchServerEvent blk))
 -&gt; Tracer IO (TraceBlockFetchServerEvent blk))
-&gt; (Trace IO Text
    -&gt; Tracer IO (WithSeverity (TraceBlockFetchServerEvent blk)))
-&gt; Trace IO Text
-&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceBlockFetchServerEvent blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (TraceBlockFetchServerEvent blk))
-&gt; Trace IO Text -&gt; Tracer IO (TraceBlockFetchServerEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk
</span><a href="#local-6989586621679350301"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-486"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk -&gt; Bool
forall blk. TraceBlockFetchServerEvent blk -&gt; Bool
</span><a href="Cardano.Tracing.Tracers.html#isTraceBlockFetchServerBlockCount"><span class="hs-identifier hs-var">isTraceBlockFetchServerBlockCount</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBlockFetchServerEvent blk
</span><a href="#local-6989586621679350301"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-487"></span><span>            </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;served.block.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-488"></span><span>              </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350316"><span class="hs-identifier hs-var">tBlocksServed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeStateInfoTracer :: Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><span class="hs-identifier hs-var">Consensus.forgeStateInfoTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceForgeStateInfo
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceForgeStateInfo
</span><a href="Cardano.Tracing.Config.html#traceForgeStateInfo"><span class="hs-identifier hs-var hs-var">traceForgeStateInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-490"></span><span>        </span><span class="annot"><span class="annottext">Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall blk.
(HasKESMetricsData blk, Show (ForgeStateInfo blk)) =&gt;
Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-var">forgeStateInfoTracer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
forall k (t :: k). Proxy t
</span><span class="hs-identifier hs-var">Proxy</span></span><span> </span><span class="hs-glyph">@</span><span> </span><span class="annot"><a href="#local-6989586621679350973"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txInboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txInboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxInbound
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxInbound
</span><a href="Cardano.Tracing.Config.html#traceTxInbound"><span class="hs-identifier hs-var hs-var">traceTxInbound</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (TraceLabelPeer
      peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-492"></span><span>        </span><span class="annot"><span class="annottext">(TraceLabelPeer
   peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
 -&gt; IO ())
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelPeer
    peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
  -&gt; IO ())
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; (TraceLabelPeer
      peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
    -&gt; IO ())
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350296"><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679350296"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-493"></span><span>          </span><span class="annot"><span class="annottext">Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
-&gt; TraceLabelPeer
     peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer
   IO
   (WithSeverity
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; (Trace IO Text
    -&gt; Tracer
         IO
         (WithSeverity
            (TraceLabelPeer
               peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))))
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        (TraceLabelPeer
           peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Tracer
      IO
      (TraceLabelPeer
         peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))))
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxInbound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679350296"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-494"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceLabelPeer
  peer (TraceTxSubmissionInbound (GenTxId blk) (GenTx blk))
</span><a href="#local-6989586621679350296"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-495"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxSubmissionCollected</span></span><span> </span><span id="local-6989586621679350294"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350294"><span class="hs-identifier hs-var">collected</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-496"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.submitted.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-497"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350315"><span class="hs-identifier hs-var">tSubmissionsCollected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350294"><span class="hs-identifier hs-var">collected</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxSubmissionProcessed</span></span><span> </span><span id="local-6989586621679350292"><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679350292"><span class="hs-identifier hs-var">processed</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-500"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.accepted.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-501"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350314"><span class="hs-identifier hs-var">tSubmissionsAccepted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount -&gt; Int
</span><span class="hs-identifier hs-var hs-var">ptxcAccepted</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679350292"><span class="hs-identifier hs-var">processed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>              </span><span class="annot"><span class="annottext">Trace IO Text -&gt; LOMeta -&gt; Text -&gt; Int -&gt; IO ()
forall i a.
Integral i =&gt;
Trace IO a -&gt; LOMeta -&gt; Text -&gt; i -&gt; IO ()
</span><a href="Cardano.Tracing.Tracers.html#traceI"><span class="hs-identifier hs-var">traceI</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350325"><span class="hs-identifier hs-var">trmet</span></a></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350319"><span class="hs-identifier hs-var">meta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;submissions.rejected.count&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span>
</span><span id="line-503"></span><span>                </span><span class="annot"><span class="annottext">TVar Int -&gt; (Int -&gt; Int) -&gt; IO Int
forall a. TVar a -&gt; (a -&gt; a) -&gt; IO a
</span><a href="Cardano.Node.STM.html#modifyReadTVarIO"><span class="hs-identifier hs-var">STM.modifyReadTVarIO</span></a></span><span> </span><span class="annot"><span class="annottext">TVar Int
</span><a href="#local-6989586621679350313"><span class="hs-identifier hs-var">tSubmissionsRejected</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount -&gt; Int
</span><span class="hs-identifier hs-var hs-var">ptxcRejected</span></span><span> </span><span class="annot"><span class="annottext">ProcessedTxCount
</span><a href="#local-6989586621679350292"><span class="hs-identifier hs-var">processed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TraceTxSubmissionInbound (GenTxId blk) (GenTx blk)
</span><span class="hs-identifier hs-var">TraceTxInboundTerminated</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-506"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxInboundCanRequestMoreTxs</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-507"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><span class="annottext">peer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceTxInboundCannotRequestMoreTxs</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">txOutboundTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
</span><span class="hs-identifier hs-var">Consensus.txOutboundTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxOutbound
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceTxSubmissionOutbound (GenTxId blk) (GenTx blk)))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxOutbound
</span><a href="Cardano.Tracing.Config.html#traceTxOutbound"><span class="hs-identifier hs-var hs-var">traceTxOutbound</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxOutbound&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-510"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">localTxSubmissionServerTracer :: Tracer IO (TraceLocalTxSubmissionServerEvent blk)
</span><span class="hs-identifier hs-var">Consensus.localTxSubmissionServerTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceLocalTxSubmissionServer
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLocalTxSubmissionServerEvent blk)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalTxSubmissionServer
</span><a href="Cardano.Tracing.Config.html#traceLocalTxSubmissionServer"><span class="hs-identifier hs-var hs-var">traceLocalTxSubmissionServer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalTxSubmissionServer&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-511"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">mempoolTracer :: Tracer IO (TraceEventMempool blk)
</span><span class="hs-identifier hs-var">Consensus.mempoolTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceMempool
-&gt; Tracer IO (TraceEventMempool blk)
-&gt; Tracer IO (TraceEventMempool blk)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceMempool
</span><a href="Cardano.Tracing.Config.html#traceMempool"><span class="hs-identifier hs-var hs-var">traceMempool</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceEventMempool blk)
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
forall blk.
(Show (ApplyTxErr blk), ToJSON (GenTxId blk),
 ToObject (ApplyTxErr blk), ToObject (GenTx blk)) =&gt;
TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-var">mempoolTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350326"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-512"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forgeTracer :: Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><span class="hs-identifier hs-var">Consensus.forgeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceForge
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceForge
</span><a href="Cardano.Tracing.Config.html#traceForge"><span class="hs-identifier hs-var hs-var">traceForge</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-513"></span><span>        </span><span class="annot"><span class="annottext">(TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; (TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350281"><span class="annot"><span class="annottext">tlcev :: TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679350281"><span class="hs-identifier hs-var">tlcev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350279"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350279"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-514"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-515"></span><span>                     </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall blk.
(RunNode blk, LedgerQueries blk) =&gt;
ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-var">traceLeadershipChecks</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350321"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350327"><span class="hs-identifier hs-var">nodeKern</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679350281"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-516"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall blk.
(RunNode blk, ToObject (CannotForge blk),
 ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk)) =&gt;
TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-var">forgeTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350321"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350326"><span class="hs-identifier hs-var">fStats</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679350281"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-517"></span><span>          </span><span class="hs-comment">-- Don't track credentials in ForgeTime.</span><span>
</span><span id="line-518"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO (TraceForgeEvent blk) -&gt; TraceForgeEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer
  IO
  (Either
     (TraceForgeEvent blk)
     (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
-&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="#local-6989586621679350324"><span class="hs-identifier hs-var">blockForgeOutcomeExtractor</span></a></span><span>
</span><span id="line-519"></span><span>                    </span><span class="annot"><span class="annottext">(Tracer
   IO
   (Either
      (TraceForgeEvent blk)
      (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
 -&gt; Tracer IO (TraceForgeEvent blk))
-&gt; Tracer
     IO
     (Either
        (TraceForgeEvent blk)
        (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
-&gt; Tracer IO (TraceForgeEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (Either
        (TraceForgeEvent blk)
        (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-520"></span><span>                    </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Tracer
      IO
      (Either
         (TraceForgeEvent blk)
         (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize)))))
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (Either
        (TraceForgeEvent blk)
        (OutcomeFidelity (Maybe (SlotNo, DiffTime, MempoolSize))))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ForgeTime&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350279"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-521"></span><span>
</span><span id="line-522"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blockchainTimeTracer :: Tracer IO (TraceBlockchainTimeEvent UTCTime)
</span><span class="hs-identifier hs-var">Consensus.blockchainTimeTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockchainTime
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (b :: Symbol) a. OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockchainTime
</span><a href="Cardano.Tracing.Config.html#traceBlockchainTime"><span class="hs-identifier hs-var hs-var">traceBlockchainTime</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (TraceBlockchainTimeEvent UTCTime)
 -&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime))
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-523"></span><span>        </span><span class="annot"><span class="annottext">(TraceBlockchainTimeEvent UTCTime -&gt; IO ())
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceBlockchainTimeEvent UTCTime -&gt; IO ())
 -&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime))
-&gt; (TraceBlockchainTimeEvent UTCTime -&gt; IO ())
-&gt; Tracer IO (TraceBlockchainTimeEvent UTCTime)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350275"><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679350275"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-524"></span><span>          </span><span class="annot"><span class="annottext">Tracer IO Text -&gt; Text -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime -&gt; Text
</span><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-var">readableTraceBlockchainTimeEvent</span></a></span><span> </span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679350275"><span class="hs-identifier hs-var">ev</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">keepAliveClientTracer :: Tracer IO (TraceKeepAliveClient peer)
</span><span class="hs-identifier hs-var">Consensus.keepAliveClientTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceKeepAliveClient
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (TraceKeepAliveClient peer)
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceKeepAliveClient
</span><a href="Cardano.Tracing.Config.html#traceKeepAliveClient"><span class="hs-identifier hs-var hs-var">traceKeepAliveClient</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350330"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350329"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;KeepAliveClient&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-526"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-527"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-528"></span><span>   </span><span class="annot"><a href="#local-6989586621679350320"><span class="hs-identifier hs-type">mkForgeTracers</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-529"></span><span>   </span><span id="local-6989586621679350320"><span class="annot"><span class="annottext">mkForgeTracers :: IO ForgeTracers
</span><a href="#local-6989586621679350320"><span class="hs-identifier hs-var hs-var">mkForgeTracers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-530"></span><span>     </span><span class="hs-comment">-- We probably don't want to pay the extra IO cost per-counter-increment. -- sk</span><span>
</span><span id="line-531"></span><span>     </span><span id="local-6989586621679350271"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-532"></span><span>     </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350269"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics.Forge&quot;</span></span><span>
</span><span id="line-533"></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; Trace IO Text
-&gt; ForgeTracers
</span><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-var">ForgeTracers</span></a></span><span>
</span><span id="line-534"></span><span>       </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; Trace IO Text
 -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forged&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-535"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forge-about-to-lead&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;could-not-forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-537"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;adopted&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-538"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;didnt-adopt&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-539"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forged-invalid&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-540"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; Trace IO Text
      -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node-not-leader&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-541"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; Trace IO Text
   -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text
      -&gt; Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cannot-forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-542"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text
   -&gt; Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO
     (Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forge-state-update-error&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>       </span><span class="annot"><span class="annottext">IO
  (Trace IO Text -&gt; Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text)
-&gt; IO (Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;block-from-future&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-544"></span><span>       </span><span class="annot"><span class="annottext">IO (Trace IO Text -&gt; Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text) -&gt; IO (Trace IO Text -&gt; ForgeTracers)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot-is-immutable&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-545"></span><span>       </span><span class="annot"><span class="annottext">IO (Trace IO Text -&gt; ForgeTracers)
-&gt; IO (Trace IO Text) -&gt; IO ForgeTracers
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (Counting (Text, LogObject Text)) -&gt; IO (Trace IO Text)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Tracer m (Counting a) -&gt; m (Tracer m a)
</span><span class="hs-identifier hs-var">counting</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer IO (Counting (Text, LogObject Text))
forall (m :: * -&gt; *) a.
LOMeta
-&gt; Text
-&gt; Text
-&gt; Trace m a
-&gt; Tracer m (Counting (Text, LogObject a))
</span><span class="hs-identifier hs-var">liftCounting</span></span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350271"><span class="hs-identifier hs-var">staticMeta</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350269"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;node-is-leader&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350328"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-546"></span><span>
</span><span id="line-547"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-type">traceLeadershipChecks</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-548"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350818"><span class="annot"><a href="#local-6989586621679350818"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-549"></span><span>  </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350818"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-550"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.Queries.html#LedgerQueries"><span class="hs-identifier hs-type">LedgerQueries</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350818"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-551"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-553"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Kernel.html#NodeKernelData"><span class="hs-identifier hs-type">NodeKernelData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350818"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350818"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span id="traceLeadershipChecks"><span class="annot"><span class="annottext">traceLeadershipChecks :: ForgeTracers
-&gt; NodeKernelData blk
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#traceLeadershipChecks"><span class="hs-identifier hs-var hs-var">traceLeadershipChecks</span></a></span></span><span> </span><span id="local-6989586621679350265"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350265"><span class="hs-identifier hs-var">_ft</span></a></span></span><span> </span><span id="local-6989586621679350264"><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350264"><span class="hs-identifier hs-var">nodeKern</span></a></span></span><span> </span><span id="local-6989586621679350263"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350263"><span class="hs-identifier hs-var">_tverb</span></a></span></span><span> </span><span id="local-6989586621679350262"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350262"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-558"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350261"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350261"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span id="local-6989586621679350260"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350260"><span class="hs-identifier hs-var">creds</span></a></span></span><span> </span><span id="local-6989586621679350259"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350259"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-559"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350259"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-560"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679350257"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350257"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-561"></span><span>        </span><span class="hs-glyph">!</span><span id="local-6989586621679350256"><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679350256"><span class="hs-identifier hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(NodeKernel IO RemoteConnectionId LocalConnectionId blk
 -&gt; IO (Int, Int, Rational))
-&gt; NodeKernelData blk -&gt; IO (StrictMaybe (Int, Int, Rational))
forall blk a.
(NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO a)
-&gt; NodeKernelData blk -&gt; IO (StrictMaybe a)
</span><a href="Cardano.Tracing.Kernel.html#mapNodeKernelDataIO"><span class="hs-identifier hs-var">mapNodeKernelDataIO</span></a></span><span>
</span><span id="line-562"></span><span>                    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679350254"><span class="annot"><span class="annottext">NodeKernel IO RemoteConnectionId LocalConnectionId blk
</span><a href="#local-6989586621679350254"><span class="hs-identifier hs-var">nk</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-563"></span><span>                       </span><span class="hs-special">(</span><span class="hs-special">,</span><span class="hs-special">,</span><span class="hs-special">)</span><span>
</span><span id="line-564"></span><span>                         </span><span class="annot"><span class="annottext">(Int -&gt; Int -&gt; Rational -&gt; (Int, Int, Rational))
-&gt; IO Int -&gt; IO (Int -&gt; Rational -&gt; (Int, Int, Rational))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExtLedgerState blk -&gt; Int)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO Int
forall blk a.
IsLedger (LedgerState blk) =&gt;
(ExtLedgerState blk -&gt; a)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO a
</span><a href="Cardano.Tracing.Kernel.html#nkQueryLedger"><span class="hs-identifier hs-var">nkQueryLedger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState blk -&gt; Int
forall blk. LedgerQueries blk =&gt; LedgerState blk -&gt; Int
</span><a href="Cardano.Tracing.Queries.html#ledgerUtxoSize"><span class="hs-identifier hs-var">ledgerUtxoSize</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState blk -&gt; Int)
-&gt; (ExtLedgerState blk -&gt; LedgerState blk)
-&gt; ExtLedgerState blk
-&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExtLedgerState blk -&gt; LedgerState blk
forall blk. ExtLedgerState blk -&gt; LedgerState blk
</span><span class="hs-identifier hs-var hs-var">ledgerState</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteConnectionId LocalConnectionId blk
</span><a href="#local-6989586621679350254"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-565"></span><span>                         </span><span class="annot"><span class="annottext">IO (Int -&gt; Rational -&gt; (Int, Int, Rational))
-&gt; IO Int -&gt; IO (Rational -&gt; (Int, Int, Rational))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(ExtLedgerState blk -&gt; Int)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO Int
forall blk a.
IsLedger (LedgerState blk) =&gt;
(ExtLedgerState blk -&gt; a)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO a
</span><a href="Cardano.Tracing.Kernel.html#nkQueryLedger"><span class="hs-identifier hs-var">nkQueryLedger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LedgerState blk -&gt; Int
forall blk. LedgerQueries blk =&gt; LedgerState blk -&gt; Int
</span><a href="Cardano.Tracing.Queries.html#ledgerDelegMapSize"><span class="hs-identifier hs-var">ledgerDelegMapSize</span></a></span><span> </span><span class="annot"><span class="annottext">(LedgerState blk -&gt; Int)
-&gt; (ExtLedgerState blk -&gt; LedgerState blk)
-&gt; ExtLedgerState blk
-&gt; Int
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">ExtLedgerState blk -&gt; LedgerState blk
forall blk. ExtLedgerState blk -&gt; LedgerState blk
</span><span class="hs-identifier hs-var hs-var">ledgerState</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteConnectionId LocalConnectionId blk
</span><a href="#local-6989586621679350254"><span class="hs-identifier hs-var">nk</span></a></span><span>
</span><span id="line-566"></span><span>                         </span><span class="annot"><span class="annottext">IO (Rational -&gt; (Int, Int, Rational))
-&gt; IO Rational -&gt; IO (Int, Int, Rational)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;*&gt;</span></span><span> </span><span class="annot"><span class="annottext">(AnchoredFragment (Header blk) -&gt; Rational)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk
-&gt; IO Rational
forall blk a.
(AnchoredFragment (Header blk) -&gt; a)
-&gt; NodeKernel IO RemoteConnectionId LocalConnectionId blk -&gt; IO a
</span><a href="Cardano.Tracing.Kernel.html#nkQueryChain"><span class="hs-identifier hs-var">nkQueryChain</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; Rational
forall blk.
HasHeader (Header blk) =&gt;
AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var">fragmentChainDensity</span></a></span><span> </span><span class="annot"><span class="annottext">NodeKernel IO RemoteConnectionId LocalConnectionId blk
</span><a href="#local-6989586621679350254"><span class="hs-identifier hs-var">nk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>                    </span><span class="annot"><span class="annottext">NodeKernelData blk
</span><a href="#local-6989586621679350264"><span class="hs-identifier hs-var">nodeKern</span></a></span><span>
</span><span id="line-568"></span><span>        </span><span id="local-6989586621679350248"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350248"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350261"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-569"></span><span>        </span><span class="annot"><span class="annottext">IO () -&gt; StrictMaybe (IO ()) -&gt; IO ()
forall a. a -&gt; StrictMaybe a -&gt; a
</span><span class="hs-identifier hs-var">fromSMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(StrictMaybe (IO ()) -&gt; IO ()) -&gt; StrictMaybe (IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-570"></span><span>          </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679350256"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
-&gt; ((Int, Int, Rational) -&gt; IO ()) -&gt; StrictMaybe (IO ())
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span>
</span><span id="line-571"></span><span>            </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679350245"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350245"><span class="hs-identifier hs-var">utxoSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350244"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350244"><span class="hs-identifier hs-var">delegMapSize</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-572"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utxoSize&quot;</span></span><span>     </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350262"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350245"><span class="hs-identifier hs-var">utxoSize</span></a></span><span>
</span><span id="line-573"></span><span>                </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;delegMapSize&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350262"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350244"><span class="hs-identifier hs-var">delegMapSize</span></a></span><span>
</span><span id="line-574"></span><span>        </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LeadershipCheck&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350262"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350248"><span class="hs-identifier hs-var">meta</span></a></span><span>
</span><span id="line-576"></span><span>          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Object -&gt; LOContent Text
forall a. Object -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogStructured</span></span><span> </span><span class="annot"><span class="annottext">(Object -&gt; LOContent Text) -&gt; Object -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(Text, Value)] -&gt; Object
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span> </span><span class="annot"><span class="annottext">([(Text, Value)] -&gt; Object) -&gt; [(Text, Value)] -&gt; Object
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-577"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;kind&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TraceStartLeadershipCheck&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-578"></span><span>            </span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;credentials&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Value
</span><span class="hs-identifier hs-var">String</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350260"><span class="hs-identifier hs-var">creds</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>            </span><span class="hs-special">,</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slot&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Value) -&gt; Word64 -&gt; Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350257"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-580"></span><span>            </span><span class="annot"><span class="annottext">[(Text, Value)] -&gt; [(Text, Value)] -&gt; [(Text, Value)]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">[(Text, Value)] -&gt; StrictMaybe [(Text, Value)] -&gt; [(Text, Value)]
forall a. a -&gt; StrictMaybe a -&gt; a
</span><span class="hs-identifier hs-var">fromSMaybe</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-581"></span><span>               </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
</span><a href="#local-6989586621679350256"><span class="hs-identifier hs-var">query</span></a></span><span> </span><span class="annot"><span class="annottext">StrictMaybe (Int, Int, Rational)
-&gt; ((Int, Int, Rational) -&gt; [(Text, Value)])
-&gt; StrictMaybe [(Text, Value)]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span>
</span><span id="line-582"></span><span>                 </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679350239"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350239"><span class="hs-identifier hs-var">utxoSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350238"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350238"><span class="hs-identifier hs-var">delegMapSize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350237"><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679350237"><span class="hs-identifier hs-var">chainDensity</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-583"></span><span>                   </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;utxoSize&quot;</span></span><span class="hs-special">,</span><span>     </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350239"><span class="hs-identifier hs-var">utxoSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-584"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;delegMapSize&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350238"><span class="hs-identifier hs-var">delegMapSize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-585"></span><span>                   </span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;chainDensity&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Float -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><span class="hs-identifier hs-var">toJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Rational -&gt; Float
forall a. Fractional a =&gt; Rational -&gt; a
</span><span class="hs-identifier hs-var">fromRational</span></span><span> </span><span class="annot"><span class="annottext">Rational
</span><a href="#local-6989586621679350237"><span class="hs-identifier hs-var">chainDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Float</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>                   </span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-589"></span><span>
</span><span id="line-590"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-type">teeForge</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-591"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350760"><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span></span><span>
</span><span id="line-592"></span><span>  </span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-593"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-594"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-596"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-597"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-598"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-600"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-601"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-602"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350760"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span id="teeForge"><span class="annot"><span class="annottext">teeForge :: ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-var hs-var">teeForge</span></a></span></span><span> </span><span id="local-6989586621679350235"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span></span><span> </span><span id="local-6989586621679350234"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350234"><span class="hs-identifier hs-var">tverb</span></a></span></span><span> </span><span id="local-6989586621679350233"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350233"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-604"></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350232"><span class="annot"><span class="annottext">ev :: WithSeverity (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="#local-6989586621679350232"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350231"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350231"><span class="hs-identifier hs-var">sev</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span id="local-6989586621679350230"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350230"><span class="hs-identifier hs-var">_creds</span></a></span></span><span> </span><span id="local-6989586621679350229"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350229"><span class="hs-identifier hs-var">event</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-605"></span><span>  </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceForgeEvent blk))
 -&gt; WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; WithSeverity (TraceForgeEvent blk)
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
-&gt; IO ()
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
-&gt; WithSeverity (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Severity
-&gt; TraceForgeEvent blk -&gt; WithSeverity (TraceForgeEvent blk)
forall a. Severity -&gt; a -&gt; WithSeverity a
</span><span class="hs-identifier hs-var">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350231"><span class="hs-identifier hs-var">sev</span></a></span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350229"><span class="hs-identifier hs-var">event</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceForgeEvent blk)) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(WithSeverity (TraceForgeEvent blk)
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; Tracer m a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">fanning</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceForgeEvent blk)
  -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; (WithSeverity (TraceForgeEvent blk)
    -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350226"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350226"><span class="hs-identifier hs-var">e</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-606"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350226"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-607"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgeAboutToLead"><span class="hs-identifier hs-var hs-var">ftForgeAboutToLead</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-608"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceSlotIsImmutable</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceSlotIsImmutable"><span class="hs-identifier hs-var hs-var">ftTraceSlotIsImmutable</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockFromFuture</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceBlockFromFuture"><span class="hs-identifier hs-var hs-var">ftTraceBlockFromFuture</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-610"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockContext</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-611"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerState</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerState</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-613"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerView</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftCouldNotForge"><span class="hs-identifier hs-var hs-var">ftCouldNotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-614"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerView</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-615"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeStateUpdateError</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceForgeStateUpdateError"><span class="hs-identifier hs-var hs-var">ftTraceForgeStateUpdateError</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-616"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeCannotForge"><span class="hs-identifier hs-var hs-var">ftTraceNodeCannotForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-617"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeNotLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeNotLeader</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftTraceNodeIsLeader"><span class="hs-identifier hs-var hs-var">ftTraceNodeIsLeader</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-619"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForged"><span class="hs-identifier hs-var hs-var">ftForged</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-620"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceDidntAdoptBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftDidntAdoptBlock"><span class="hs-identifier hs-var hs-var">ftDidntAdoptBlock</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-621"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedInvalidBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftForgedInvalid"><span class="hs-identifier hs-var hs-var">ftForgedInvalid</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceAdoptedBlock</span></span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall blk.
Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var">teeForge'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeTracers -&gt; Trace IO Text
</span><a href="Cardano.Tracing.Tracers.html#ftAdopted"><span class="hs-identifier hs-var hs-var">ftAdopted</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350235"><span class="hs-identifier hs-var">ft</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-623"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350229"><span class="hs-identifier hs-var">event</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-624"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679350209"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350209"><span class="hs-identifier hs-var">_slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>    </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; WithSeverity (TraceLabelCreds (TraceForgeEvent blk)) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350234"><span class="hs-identifier hs-var">tverb</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350233"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="#local-6989586621679350232"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-626"></span><span>
</span><span id="line-627"></span><span id="local-6989586621679350767"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-type">teeForge'</span></a></span><span>
</span><span id="line-628"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350767"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-630"></span><span id="teeForge%27"><span class="annot"><span class="annottext">teeForge' :: Trace IO Text -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#teeForge%27"><span class="hs-identifier hs-var hs-var">teeForge'</span></a></span></span><span> </span><span id="local-6989586621679350208"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350208"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-631"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (WithSeverity (TraceForgeEvent blk)))
-&gt; (WithSeverity (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (WithSeverity (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350207"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350207"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-632"></span><span>    </span><span id="local-6989586621679350206"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350206"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-633"></span><span>    </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350208"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((LOMeta, LOContent Text) -&gt; IO ())
-&gt; (LOContent Text -&gt; (LOMeta, LOContent Text))
-&gt; LOContent Text
-&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350206"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(LOContent Text -&gt; IO ()) -&gt; LOContent Text -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-634"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350207"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-635"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceStartLeadershipCheck</span></span><span> </span><span id="local-6989586621679350205"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350205"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-636"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;aboutToLeadSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350205"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-637"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceSlotIsImmutable</span></span><span> </span><span id="local-6989586621679350204"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350204"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679350203"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679350203"><span class="hs-identifier hs-var">_tipPoint</span></a></span></span><span> </span><span id="local-6989586621679350202"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621679350202"><span class="hs-identifier hs-var">_tipBlkNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-638"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotIsImmutable&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350204"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-639"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockFromFuture</span></span><span> </span><span id="local-6989586621679350201"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350201"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679350200"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350200"><span class="hs-identifier hs-var">_slotNo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-640"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockFromFuture&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350201"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-641"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceBlockContext</span></span><span> </span><span id="local-6989586621679350199"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350199"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679350198"><span class="annot"><span class="annottext">BlockNo
</span><a href="#local-6989586621679350198"><span class="hs-identifier hs-var">_tipBlkNo</span></a></span></span><span> </span><span id="local-6989586621679350197"><span class="annot"><span class="annottext">Point blk
</span><a href="#local-6989586621679350197"><span class="hs-identifier hs-var">_tipPoint</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-642"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blockContext&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350199"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-643"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerState</span></span><span> </span><span id="local-6989586621679350196"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350196"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-644"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;couldNotForgeSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350196"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-645"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerState</span></span><span> </span><span id="local-6989586621679350195"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350195"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-646"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ledgerState&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350195"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-647"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNoLedgerView</span></span><span> </span><span id="local-6989586621679350194"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350194"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">OutsideForecastRange
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-648"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;couldNotForgeSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350194"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLedgerView</span></span><span> </span><span id="local-6989586621679350193"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350193"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-650"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ledgerView&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350193"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-651"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeStateUpdateError</span></span><span> </span><span id="local-6989586621679350192"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350192"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679350191"><span class="annot"><span class="annottext">ForgeStateUpdateError blk
</span><a href="#local-6989586621679350191"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-652"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgeStateUpdateError&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350192"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-653"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span id="local-6989586621679350190"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350190"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span id="local-6989586621679350189"><span class="annot"><span class="annottext">CannotForge blk
</span><a href="#local-6989586621679350189"><span class="hs-identifier hs-var">_reason</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-654"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeCannotForge&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350190"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-655"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span> </span><span id="local-6989586621679350188"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350188"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-656"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeNotLeader&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350188"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-657"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span> </span><span id="local-6989586621679350187"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350187"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-658"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeIsLeader&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350187"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-659"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span> </span><span id="local-6989586621679350186"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350186"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">Point blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-660"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350186"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-661"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceDidntAdoptBlock</span></span><span> </span><span id="local-6989586621679350185"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350185"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-662"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;notAdoptedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350185"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-663"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedInvalidBlock</span></span><span> </span><span id="local-6989586621679350184"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350184"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">InvalidBlockReason blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-664"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;forgedInvalidSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350184"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-665"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceAdoptedBlock</span></span><span> </span><span id="local-6989586621679350183"><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350183"><span class="hs-identifier hs-var">slot</span></a></span></span><span> </span><span class="annot"><span class="annottext">blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">[GenTx blk]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;adoptedSlotLast&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text) -&gt; Measurable -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Word64 -&gt; Integer) -&gt; Word64 -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><a href="#local-6989586621679350183"><span class="hs-identifier hs-var">slot</span></a></span><span>
</span><span id="line-667"></span><span>
</span><span id="line-668"></span><span id="local-6989586621679350817"><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-type">forgeTracer</span></a></span><span>
</span><span id="line-669"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-670"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">CannotForge</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-671"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">LedgerState</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-672"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">OtherHeaderEnvelopeError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-673"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ValidationErr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BlockProtocol</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateUpdateError</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-675"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ForgeTracers"><span class="hs-identifier hs-type">ForgeTracers</span></a></span><span>
</span><span id="line-679"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350817"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span><span>
</span><span id="line-681"></span><span id="forgeTracer"><span class="annot"><span class="annottext">forgeTracer :: TracingVerbosity
-&gt; Trace IO Text
-&gt; ForgeTracers
-&gt; ForgingStats
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeTracer"><span class="hs-identifier hs-var hs-var">forgeTracer</span></a></span></span><span> </span><span id="local-6989586621679350182"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350182"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350181"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350181"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span id="local-6989586621679350180"><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350180"><span class="hs-identifier hs-var">forgeTracers</span></a></span></span><span> </span><span id="local-6989586621679350179"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350179"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-682"></span><span>  </span><span class="annot"><span class="annottext">(TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; (TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350178"><span class="annot"><span class="annottext">tlcev :: TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679350178"><span class="hs-identifier hs-var">tlcev</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350177"><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350177"><span class="hs-identifier hs-var">ev</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-683"></span><span>    </span><span class="hs-comment">-- Ignoring the credentials label for measurement and counters:</span><span>
</span><span id="line-684"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceForgeEvent blk) -&gt; TraceForgeEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
forall blk. Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="Cardano.Tracing.MicroBenchmarking.html#measureTxsEnd"><span class="hs-identifier hs-var">measureTxsEnd</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350181"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350177"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-685"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceForgeEvent blk) -&gt; TraceForgeEvent blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
forall blk.
ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-var">notifyBlockForging</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350179"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350181"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><a href="#local-6989586621679350177"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-686"></span><span>    </span><span class="hs-comment">-- Consensus tracer -- here we track the label:</span><span>
</span><span id="line-687"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
-&gt; TraceLabelCreds (TraceForgeEvent blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-688"></span><span>                 </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
 -&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
-&gt; Tracer IO (TraceLabelCreds (TraceForgeEvent blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall blk.
(RunNode blk, ToObject (CannotForge blk),
 ToObject (LedgerErr (LedgerState blk)),
 ToObject (OtherHeaderEnvelopeError blk),
 ToObject (ValidationErr (BlockProtocol blk)),
 ToObject (ForgeStateUpdateError blk)) =&gt;
ForgeTracers
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
</span><a href="Cardano.Tracing.Tracers.html#teeForge"><span class="hs-identifier hs-var">teeForge</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeTracers
</span><a href="#local-6989586621679350180"><span class="hs-identifier hs-var">forgeTracers</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350182"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-689"></span><span>                 </span><span class="annot"><span class="annottext">(Trace IO Text
 -&gt; Tracer
      IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk))))
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceLabelCreds (TraceForgeEvent blk)))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350181"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (TraceForgeEvent blk)
</span><a href="#local-6989586621679350178"><span class="hs-identifier hs-var">tlcev</span></a></span><span>
</span><span id="line-690"></span><span>
</span><span id="line-691"></span><span id="local-6989586621679350761"><span class="annot"><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-type">notifyBlockForging</span></a></span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-693"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-694"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgeEvent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350761"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-695"></span><span id="notifyBlockForging"><span class="annot"><span class="annottext">notifyBlockForging :: ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceForgeEvent blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyBlockForging"><span class="hs-identifier hs-var hs-var">notifyBlockForging</span></a></span></span><span> </span><span id="local-6989586621679350174"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span id="local-6989586621679350173"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350173"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceForgeEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceForgeEvent blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceForgeEvent blk -&gt; IO ()) -&gt; Tracer IO (TraceForgeEvent blk))
-&gt; (TraceForgeEvent blk -&gt; IO ())
-&gt; Tracer IO (TraceForgeEvent blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-696"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeCannotForge</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-697"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeCannotForge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350173"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-698"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-699"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679350171"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350171"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350171"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsNodeCannotForgeNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350171"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-700"></span><span>                       </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeCannotForgeNum"><span class="hs-identifier hs-var hs-var">ftsNodeCannotForgeNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350171"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeIsLeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span id="local-6989586621679350168"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350168"><span class="hs-identifier hs-var">slot'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-702"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350167"><span class="annot"><span class="annottext">slot :: Int
</span><a href="#local-6989586621679350167"><span class="hs-identifier hs-var hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350168"><span class="hs-identifier hs-var">slot'</span></a></span><span>
</span><span id="line-703"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;nodeIsLeaderNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350173"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-704"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-705"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679350166"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350166"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350166"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsNodeIsLeaderNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350166"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span>
</span><span id="line-706"></span><span>                          </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350167"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-707"></span><span>                      </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsNodeIsLeaderNum"><span class="hs-identifier hs-var hs-var">ftsNodeIsLeaderNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350166"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-708"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceForgedBlock</span></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-709"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;blocksForgedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350173"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-710"></span><span>      </span><span class="annot"><span class="annottext">(Int -&gt; IO ()) -&gt; IO Int -&gt; IO ()
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Int)) -&gt; IO Int
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-711"></span><span>            </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679350163"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350163"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350163"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsBlocksForgedNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350163"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span>
</span><span id="line-712"></span><span>                       </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsBlocksForgedNum"><span class="hs-identifier hs-var hs-var">ftsBlocksForgedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350163"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-713"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceNodeNotLeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SlotNo</span></span><span> </span><span id="local-6989586621679350161"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350161"><span class="hs-identifier hs-var">slot'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-comment">-- Not is not a leader again, so now the number of blocks forged by this node</span><span>
</span><span id="line-715"></span><span>    </span><span class="hs-comment">-- should be equal to the number of slots when this node was a leader.</span><span>
</span><span id="line-716"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350160"><span class="annot"><span class="annottext">slot :: Int
</span><a href="#local-6989586621679350160"><span class="hs-identifier hs-var hs-var">slot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350161"><span class="hs-identifier hs-var">slot'</span></a></span><span>
</span><span id="line-717"></span><span>    </span><span id="local-6989586621679350159"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679350159"><span class="hs-identifier hs-var">hasMissed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-718"></span><span>      </span><span class="annot"><span class="annottext">ForgingStats
-&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, Bool)) -&gt; IO Bool
forall a.
ForgingStats -&gt; (ForgeThreadStats -&gt; (ForgeThreadStats, a)) -&gt; IO a
</span><a href="Cardano.Tracing.Metrics.html#mapForgingCurrentThreadStats"><span class="hs-identifier hs-var">mapForgingCurrentThreadStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span><span>
</span><span id="line-719"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679350158"><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-720"></span><span>          </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int
forall a. Enum a =&gt; a -&gt; a
</span><span class="hs-identifier hs-var">succ</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350160"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-keyword">then</span><span>
</span><span id="line-721"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350160"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span>
</span><span id="line-722"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-723"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350155"><span class="annot"><span class="annottext">missed :: Int
</span><a href="#local-6989586621679350155"><span class="hs-identifier hs-var hs-var">missed</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var hs-var">ftsSlotsMissedNum</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350160"><span class="hs-identifier hs-var">slot</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var hs-var">ftsLastSlot</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>            </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgeThreadStats
</span><a href="#local-6989586621679350158"><span class="hs-identifier hs-var">fts</span></a></span><span> </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ftsLastSlot :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsLastSlot"><span class="hs-identifier hs-var">ftsLastSlot</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350160"><span class="hs-identifier hs-var">slot</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ftsSlotsMissedNum :: Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var">ftsSlotsMissedNum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350155"><span class="hs-identifier hs-var">missed</span></a></span><span> </span><span class="hs-special">}</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679350159"><span class="hs-identifier hs-var">hasMissed</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-726"></span><span>      </span><span id="local-6989586621679350153"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350153"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Int] -&gt; Int
forall (f :: * -&gt; *) a. (Foldable f, Num a) =&gt; f a -&gt; a
</span><span class="hs-identifier hs-var">sum</span></span><span> </span><span class="annot"><span class="annottext">([Int] -&gt; Int) -&gt; IO [Int] -&gt; IO Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">ForgingStats -&gt; (ForgeThreadStats -&gt; Int) -&gt; IO [Int]
forall a. ForgingStats -&gt; (ForgeThreadStats -&gt; a) -&gt; IO [a]
</span><a href="Cardano.Tracing.Metrics.html#threadStatsProjection"><span class="hs-identifier hs-var">threadStatsProjection</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350174"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeThreadStats -&gt; Int
</span><a href="Cardano.Tracing.Metrics.html#ftsSlotsMissedNum"><span class="hs-identifier hs-var hs-var">ftsSlotsMissedNum</span></a></span><span>
</span><span id="line-727"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;slotsMissedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350173"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350153"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-728"></span><span>  </span><span class="annot"><span class="annottext">TraceForgeEvent blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-729"></span><span>
</span><span id="line-730"></span><span>
</span><span id="line-731"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-732"></span><span class="hs-comment">-- Mempool Tracers</span><span>
</span><span id="line-733"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span id="local-6989586621679350741"><span class="annot"><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-type">notifyTxsProcessed</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679350741"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-736"></span><span id="notifyTxsProcessed"><span class="annot"><span class="annottext">notifyTxsProcessed :: ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-var hs-var">notifyTxsProcessed</span></a></span></span><span> </span><span id="local-6989586621679350149"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350149"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span id="local-6989586621679350148"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350148"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-737"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-738"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span> </span><span id="local-6989586621679350146"><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350146"><span class="hs-identifier hs-var">txs</span></a></span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-739"></span><span>    </span><span class="hs-comment">-- TraceMempoolRemoveTxs are previously valid transactions that are no longer valid because of</span><span>
</span><span id="line-740"></span><span>    </span><span class="hs-comment">-- changes in the ledger state. These transactions are already removed from the mempool,</span><span>
</span><span id="line-741"></span><span>    </span><span class="hs-comment">-- so we can treat them as completely processed.</span><span>
</span><span id="line-742"></span><span>    </span><span id="local-6989586621679350145"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350145"><span class="hs-identifier hs-var">updatedTxProcessed</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ForgingStats -&gt; (Int -&gt; Int) -&gt; IO Int
</span><a href="Cardano.Tracing.Metrics.html#mapForgingStatsTxsProcessed"><span class="hs-identifier hs-var">mapForgingStatsTxsProcessed</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350149"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenTx blk] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350146"><span class="hs-identifier hs-var">txs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-743"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Int -&gt; IO ()
</span><a href="Cardano.Node.Configuration.Logging.html#traceCounter"><span class="hs-identifier hs-var">traceCounter</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;txsProcessedNum&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350148"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int -&gt; Int
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350145"><span class="hs-identifier hs-var">updatedTxProcessed</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-744"></span><span>  </span><span class="hs-comment">-- The rest of the constructors.</span><span>
</span><span id="line-745"></span><span>  </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-746"></span><span>
</span><span id="line-747"></span><span>
</span><span id="line-748"></span><span id="local-6989586621679350742"><span id="local-6989586621679350743"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-type">mempoolMetricsTraceTransformer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350743"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679350742"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-749"></span><span id="mempoolMetricsTraceTransformer"><span class="annot"><span class="annottext">mempoolMetricsTraceTransformer :: Trace IO a -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-var hs-var">mempoolMetricsTraceTransformer</span></a></span></span><span> </span><span id="local-6989586621679350141"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350141"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350140"><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350140"><span class="hs-identifier hs-var">mempoolEvent</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-750"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350139"><span class="annot"><span class="annottext">tr' :: Trace IO a
</span><a href="#local-6989586621679350139"><span class="hs-identifier hs-var hs-var">tr'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO a -&gt; Trace IO a
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350141"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-751"></span><span>      </span><span class="hs-special">(</span><span id="local-6989586621679350138"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679350138"><span class="hs-identifier hs-var">_n</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679350137"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350137"><span class="hs-identifier hs-var">tot</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350140"><span class="hs-identifier hs-var">mempoolEvent</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-752"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolAddedTx</span></span><span>     </span><span id="local-6989586621679350135"><span class="annot"><span class="annottext">GenTx blk
</span><a href="#local-6989586621679350135"><span class="hs-identifier hs-var">_tx0</span></a></span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350134"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350134"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350134"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRejectedTx</span></span><span>  </span><span id="local-6989586621679350132"><span class="annot"><span class="annottext">GenTx blk
</span><a href="#local-6989586621679350132"><span class="hs-identifier hs-var">_tx0</span></a></span></span><span> </span><span class="annot"><span class="annottext">ApplyTxErr blk
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350131"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350131"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">1</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350131"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolRemoveTxs</span></span><span>   </span><span id="local-6989586621679350130"><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350130"><span class="hs-identifier hs-var">txs0</span></a></span></span><span>   </span><span id="local-6989586621679350129"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350129"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[GenTx blk] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350130"><span class="hs-identifier hs-var">txs0</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350129"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">TraceMempoolManuallyRemovedTxs</span></span><span> </span><span id="local-6989586621679350127"><span class="annot"><span class="annottext">[GenTxId blk]
</span><a href="#local-6989586621679350127"><span class="hs-identifier hs-var">txs0</span></a></span></span><span> </span><span id="local-6989586621679350126"><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350126"><span class="hs-identifier hs-var">txs1</span></a></span></span><span> </span><span id="local-6989586621679350125"><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350125"><span class="hs-identifier hs-var">tot0</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">[GenTxId blk] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GenTxId blk]
</span><a href="#local-6989586621679350127"><span class="hs-identifier hs-var">txs0</span></a></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Int -&gt; Int
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">[GenTx blk] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[GenTx blk]
</span><a href="#local-6989586621679350126"><span class="hs-identifier hs-var">txs1</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350125"><span class="hs-identifier hs-var">tot0</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>      </span><span id="local-6989586621679350745"><span class="annot"><a href="#local-6989586621679350124"><span class="hs-identifier hs-type">logValue1</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350745"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-757"></span><span>      </span><span id="local-6989586621679350124"><span class="annot"><span class="annottext">logValue1 :: LOContent a
</span><a href="#local-6989586621679350124"><span class="hs-identifier hs-var hs-var">logValue1</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;txsInMempool&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MempoolSize -&gt; SizeInBytes
</span><span class="hs-identifier hs-var hs-var">msNumTxs</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350137"><span class="hs-identifier hs-var">tot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span>      </span><span id="local-6989586621679350122"><span class="annot"><a href="#local-6989586621679350121"><span class="hs-identifier hs-type">logValue2</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350122"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-759"></span><span>      </span><span id="local-6989586621679350121"><span class="annot"><span class="annottext">logValue2 :: LOContent a
</span><a href="#local-6989586621679350121"><span class="hs-identifier hs-var hs-var">logValue2</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mempoolBytes&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SizeInBytes -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MempoolSize -&gt; SizeInBytes
</span><span class="hs-identifier hs-var hs-var">msNumBytes</span></span><span> </span><span class="annot"><span class="annottext">MempoolSize
</span><a href="#local-6989586621679350137"><span class="hs-identifier hs-var">tot</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-760"></span><span>  </span><span id="local-6989586621679350119"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350119"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-761"></span><span>  </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350139"><span class="hs-identifier hs-var">tr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350119"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LOContent a
forall a. LOContent a
</span><a href="#local-6989586621679350124"><span class="hs-identifier hs-var">logValue1</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-762"></span><span>  </span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350139"><span class="hs-identifier hs-var">tr'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350119"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">LOContent a
forall a. LOContent a
</span><a href="#local-6989586621679350121"><span class="hs-identifier hs-var">logValue2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-763"></span><span>
</span><span id="line-764"></span><span id="local-6989586621679350820"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-type">mempoolTracer</span></a></span><span>
</span><span id="line-765"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350820"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-766"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679350820"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-767"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350820"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-768"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679350820"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-769"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-770"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-771"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-772"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#ForgingStats"><span class="hs-identifier hs-type">ForgingStats</span></a></span><span>
</span><span id="line-773"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679350820"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-774"></span><span id="mempoolTracer"><span class="annot"><span class="annottext">mempoolTracer :: TraceSelection
-&gt; Trace IO Text
-&gt; ForgingStats
-&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolTracer"><span class="hs-identifier hs-var hs-var">mempoolTracer</span></a></span></span><span> </span><span id="local-6989586621679350118"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350118"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621679350117"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350117"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span id="local-6989586621679350116"><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350116"><span class="hs-identifier hs-var">fStats</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceEventMempool blk -&gt; IO ())
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; (TraceEventMempool blk -&gt; IO ())
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350115"><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350115"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-775"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall a blk. Trace IO a -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mempoolMetricsTraceTransformer"><span class="hs-identifier hs-var">mempoolMetricsTraceTransformer</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350117"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350115"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-776"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall blk.
ForgingStats -&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#notifyTxsProcessed"><span class="hs-identifier hs-var">notifyTxsProcessed</span></a></span><span> </span><span class="annot"><span class="annottext">ForgingStats
</span><a href="#local-6989586621679350116"><span class="hs-identifier hs-var">fStats</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350117"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350115"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-777"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall blk. Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.MicroBenchmarking.html#measureTxsStart"><span class="hs-identifier hs-var">measureTxsStart</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350117"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350115"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-778"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350113"><span class="annot"><span class="annottext">tr :: Trace IO Text
</span><a href="#local-6989586621679350113"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Mempool&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350117"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-779"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceEventMempool blk) -&gt; TraceEventMempool blk -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
forall blk.
(Show (ApplyTxErr blk), ToJSON (GenTxId blk),
 ToObject (ApplyTxErr blk), ToObject (GenTx blk)) =&gt;
TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-var">mpTracer</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350118"><span class="hs-identifier hs-var">tc</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350113"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceEventMempool blk
</span><a href="#local-6989586621679350115"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-780"></span><span>
</span><span id="line-781"></span><span id="local-6989586621679350739"><span class="annot"><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-type">mpTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350739"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-782"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToJSON</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTxId</span></span><span> </span><span class="annot"><a href="#local-6989586621679350739"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350739"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-784"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ToObject</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679350739"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-785"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>         </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">TraceEventMempool</span></span><span> </span><span class="annot"><a href="#local-6989586621679350739"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-787"></span><span id="mpTracer"><span class="annot"><span class="annottext">mpTracer :: TraceSelection
-&gt; Trace IO Text -&gt; Tracer IO (TraceEventMempool blk)
</span><a href="Cardano.Tracing.Tracers.html#mpTracer"><span class="hs-identifier hs-var hs-var">mpTracer</span></a></span></span><span> </span><span id="local-6989586621679350111"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350111"><span class="hs-identifier hs-var">tc</span></a></span></span><span> </span><span id="local-6989586621679350110"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350110"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity (TraceEventMempool blk))
 -&gt; Tracer IO (TraceEventMempool blk))
-&gt; Tracer IO (WithSeverity (TraceEventMempool blk))
-&gt; Tracer IO (TraceEventMempool blk)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracer IO (WithSeverity (TraceEventMempool blk))
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; TracingVerbosity
</span><a href="Cardano.Tracing.Config.html#traceVerbosity"><span class="hs-identifier hs-var hs-var">traceVerbosity</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350111"><span class="hs-identifier hs-var">tc</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350110"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-788"></span><span>
</span><span id="line-789"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-790"></span><span class="hs-comment">-- ForgeStateInfo Tracers</span><span>
</span><span id="line-791"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-792"></span><span>
</span><span id="line-793"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-type">forgeStateInfoMetricsTraceTransformer</span></a></span><span>
</span><span id="line-794"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350720"><span class="annot"><a href="#local-6989586621679350720"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span id="local-6989586621679350721"><span class="annot"><a href="#local-6989586621679350721"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350721"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-795"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679350721"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-796"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350720"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-797"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679350721"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span id="forgeStateInfoMetricsTraceTransformer"><span class="annot"><span class="annottext">forgeStateInfoMetricsTraceTransformer :: Proxy blk
-&gt; Trace IO a -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-var hs-var">forgeStateInfoMetricsTraceTransformer</span></a></span></span><span> </span><span id="local-6989586621679350108"><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679350108"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679350107"><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350107"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; (TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-799"></span><span>  </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350106"><span class="annot"><span class="annottext">ForgeStateInfo blk
</span><a href="#local-6989586621679350106"><span class="hs-identifier hs-var">forgeStateInfo</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-800"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Proxy blk -&gt; ForgeStateInfo blk -&gt; KESMetricsData
forall blk.
HasKESMetricsData blk =&gt;
Proxy blk -&gt; ForgeStateInfo blk -&gt; KESMetricsData
</span><a href="Cardano.Tracing.Metrics.html#getKESMetricsData"><span class="hs-identifier hs-var">getKESMetricsData</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679350108"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">ForgeStateInfo blk
</span><a href="#local-6989586621679350106"><span class="hs-identifier hs-var">forgeStateInfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-801"></span><span>      </span><span class="annot"><span class="annottext">KESMetricsData
</span><a href="Cardano.Tracing.Metrics.html#NoKESMetricsData"><span class="hs-identifier hs-var">NoKESMetricsData</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">() -&gt; IO ()
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>      </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#TPraosKESMetricsData"><span class="hs-identifier hs-type">TPraosKESMetricsData</span></a></span><span> </span><span id="local-6989586621679350102"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350102"><span class="hs-identifier hs-var">kesPeriodOfKey</span></a></span></span><span>
</span><span id="line-803"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Metrics.html#MaxKESEvolutions"><span class="hs-identifier hs-type">MaxKESEvolutions</span></a></span><span> </span><span id="local-6989586621679350100"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350100"><span class="hs-identifier hs-var">maxKesEvos</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>                           </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Metrics.html#OperationalCertStartKESPeriod"><span class="hs-identifier hs-type">OperationalCertStartKESPeriod</span></a></span><span> </span><span id="local-6989586621679350098"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350098"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-805"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350097"><span class="annot"><span class="annottext">metricsTr :: Trace IO a
</span><a href="#local-6989586621679350097"><span class="hs-identifier hs-var hs-var">metricsTr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO a -&gt; Trace IO a
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350107"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-806"></span><span>
</span><span id="line-807"></span><span>            </span><span class="hs-comment">-- The KES period of the hot key is relative to the start KES</span><span>
</span><span id="line-808"></span><span>            </span><span class="hs-comment">-- period of the operational certificate.</span><span>
</span><span id="line-809"></span><span>            </span><span id="local-6989586621679350096"><span class="annot"><span class="annottext">currentKesPeriod :: Word
</span><a href="#local-6989586621679350096"><span class="hs-identifier hs-var hs-var">currentKesPeriod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350098"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350102"><span class="hs-identifier hs-var">kesPeriodOfKey</span></a></span><span>
</span><span id="line-810"></span><span>
</span><span id="line-811"></span><span>            </span><span id="local-6989586621679350095"><span class="annot"><span class="annottext">oCertExpiryKesPeriod :: Word
</span><a href="#local-6989586621679350095"><span class="hs-identifier hs-var hs-var">oCertExpiryKesPeriod</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350098"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350100"><span class="hs-identifier hs-var">maxKesEvos</span></a></span><span>
</span><span id="line-812"></span><span>
</span><span id="line-813"></span><span>            </span><span id="local-6989586621679350094"><span class="annot"><span class="annottext">kesPeriodsUntilExpiry :: Word
</span><a href="#local-6989586621679350094"><span class="hs-identifier hs-var hs-var">kesPeriodsUntilExpiry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-814"></span><span>              </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Ord a =&gt; a -&gt; a -&gt; a
</span><span class="hs-identifier hs-var">max</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350095"><span class="hs-identifier hs-var">oCertExpiryKesPeriod</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Word
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350096"><span class="hs-identifier hs-var">currentKesPeriod</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-815"></span><span>
</span><span id="line-816"></span><span>            </span><span class="annot"><a href="#local-6989586621679350093"><span class="hs-identifier hs-type">logValues</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">LOContent</span></span><span> </span><span class="annot"><a href="#local-6989586621679350720"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-817"></span><span>            </span><span id="local-6989586621679350093"><span class="annot"><span class="annottext">logValues :: [LOContent a]
</span><a href="#local-6989586621679350093"><span class="hs-identifier hs-var hs-var">logValues</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-818"></span><span>              </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateStartKESPeriod&quot;</span></span><span>
</span><span id="line-819"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-820"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350098"><span class="hs-identifier hs-var">oCertStartKesPeriod</span></a></span><span>
</span><span id="line-821"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;operationalCertificateExpiryKESPeriod&quot;</span></span><span>
</span><span id="line-822"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-823"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350095"><span class="hs-identifier hs-var">oCertExpiryKesPeriod</span></a></span><span>
</span><span id="line-824"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;currentKESPeriod&quot;</span></span><span>
</span><span id="line-825"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-826"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350096"><span class="hs-identifier hs-var">currentKesPeriod</span></a></span><span>
</span><span id="line-827"></span><span>              </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent a
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remainingKESPeriods&quot;</span></span><span>
</span><span id="line-828"></span><span>                  </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent a) -&gt; Measurable -&gt; LOContent a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span>
</span><span id="line-829"></span><span>                  </span><span class="annot"><span class="annottext">(Integer -&gt; Measurable) -&gt; Integer -&gt; Measurable
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350094"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span>
</span><span id="line-830"></span><span>              </span><span class="hs-special">]</span><span>
</span><span id="line-831"></span><span>
</span><span id="line-832"></span><span>        </span><span id="local-6989586621679350092"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350092"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Critical</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-833"></span><span>        </span><span class="annot"><span class="annottext">(LOContent a -&gt; IO ()) -&gt; [LOContent a] -&gt; IO ()
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Foldable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m ()
</span><span class="hs-identifier hs-var">mapM_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO a -&gt; (LOMeta, LOContent a) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350097"><span class="hs-identifier hs-var">metricsTr</span></a></span><span> </span><span class="annot"><span class="annottext">((LOMeta, LOContent a) -&gt; IO ())
-&gt; (LOContent a -&gt; (LOMeta, LOContent a)) -&gt; LOContent a -&gt; IO ()
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350092"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[LOContent a]
</span><a href="#local-6989586621679350093"><span class="hs-identifier hs-var">logValues</span></a></span><span>
</span><span id="line-834"></span><span>
</span><span id="line-835"></span><span>        </span><span class="hs-comment">-- Trace warning messages on the last 7 KES periods and, in the</span><span>
</span><span id="line-836"></span><span>        </span><span class="hs-comment">-- final and subsequent KES periods, trace alert messages.</span><span>
</span><span id="line-837"></span><span>        </span><span id="local-6989586621679350090"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350090"><span class="hs-identifier hs-var">metaWarning</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Warning</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-838"></span><span>        </span><span id="local-6989586621679350088"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350088"><span class="hs-identifier hs-var">metaAlert</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Alert</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Public</span></span><span>
</span><span id="line-839"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350094"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">7</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-840"></span><span>          </span><span class="annot"><span class="annottext">Trace IO a -&gt; (Text, LogObject a) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="annot"><span class="annottext">Trace IO a
</span><a href="#local-6989586621679350107"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-841"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Text
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-842"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; LOMeta -&gt; LOContent a -&gt; LogObject a
forall a. Text -&gt; LOMeta -&gt; LOContent a -&gt; LogObject a
</span><span class="hs-identifier hs-var">LogObject</span></span><span>
</span><span id="line-843"></span><span>                </span><span class="annot"><span class="annottext">Text
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-844"></span><span>                </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350094"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span> </span><span class="annot"><span class="annottext">Word -&gt; Word -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&lt;=</span></span><span> </span><span class="annot"><span class="annottext">Word
</span><span class="hs-number">1</span></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350088"><span class="hs-identifier hs-var">metaAlert</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350090"><span class="hs-identifier hs-var">metaWarning</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-845"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Object -&gt; Text -&gt; LOContent a
forall a. Object -&gt; Text -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogStructuredText</span></span><span> </span><span class="annot"><span class="annottext">Object
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word -&gt; Text
</span><a href="#local-6989586621679350083"><span class="hs-identifier hs-var">expiryLogMessage</span></a></span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350094"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-846"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-847"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-848"></span><span>    </span><span class="annot"><a href="#local-6989586621679350083"><span class="hs-identifier hs-type">expiryLogMessage</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-849"></span><span>    </span><span id="local-6989586621679350083"><span class="annot"><span class="annottext">expiryLogMessage :: Word -&gt; Text
</span><a href="#local-6989586621679350083"><span class="hs-identifier hs-var hs-var">expiryLogMessage</span></a></span></span><span> </span><span id="local-6989586621679350082"><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350082"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-850"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Operational key will expire in &quot;</span></span><span>
</span><span id="line-851"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (Word -&gt; String) -&gt; Word -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Word -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Word
</span><a href="#local-6989586621679350082"><span class="hs-identifier hs-var">kesPeriodsUntilExpiry</span></a></span><span>
</span><span id="line-852"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; KES periods.&quot;</span></span><span>
</span><span id="line-853"></span><span>
</span><span id="line-854"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-type">forgeStateInfoTracer</span></a></span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350828"><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-856"></span><span>     </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cardano.Tracing.Metrics.html#HasKESMetricsData"><span class="hs-identifier hs-type">HasKESMetricsData</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-857"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-858"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-859"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Proxy</span></span><span> </span><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-860"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-861"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-862"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-863"></span><span id="forgeStateInfoTracer"><span class="annot"><span class="annottext">forgeStateInfoTracer :: Proxy blk
-&gt; TraceSelection
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoTracer"><span class="hs-identifier hs-var hs-var">forgeStateInfoTracer</span></a></span></span><span> </span><span id="local-6989586621679350080"><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679350080"><span class="hs-identifier hs-var">p</span></a></span></span><span> </span><span id="local-6989586621679350079"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350079"><span class="hs-identifier hs-var">_ts</span></a></span></span><span> </span><span id="local-6989586621679350078"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350078"><span class="hs-identifier hs-var">tracer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; (TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ())
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350077"><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679350077"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-864"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679350076"><span class="annot"><span class="annottext">tr :: Trace IO Text
</span><a href="#local-6989586621679350076"><span class="hs-identifier hs-var hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Forge&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350078"><span class="hs-identifier hs-var">tracer</span></a></span><span>
</span><span id="line-865"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Proxy blk
-&gt; Trace IO Text
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a blk.
HasKESMetricsData blk =&gt;
Proxy blk
-&gt; Trace IO a -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="Cardano.Tracing.Tracers.html#forgeStateInfoMetricsTraceTransformer"><span class="hs-identifier hs-var">forgeStateInfoMetricsTraceTransformer</span></a></span><span> </span><span class="annot"><span class="annottext">Proxy blk
</span><a href="#local-6989586621679350080"><span class="hs-identifier hs-var">p</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350078"><span class="hs-identifier hs-var">tracer</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679350077"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-866"></span><span>    </span><span class="annot"><span class="annottext">Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
-&gt; TraceLabelCreds (ForgeStateInfo blk) -&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="#local-6989586621679350075"><span class="hs-identifier hs-var">fsTracer</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350076"><span class="hs-identifier hs-var">tr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TraceLabelCreds (ForgeStateInfo blk)
</span><a href="#local-6989586621679350077"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-867"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-868"></span><span>    </span><span class="annot"><a href="#local-6989586621679350075"><span class="hs-identifier hs-type">fsTracer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Consensus.TraceLabelCreds</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ForgeStateInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679350828"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>    </span><span id="local-6989586621679350075"><span class="annot"><span class="annottext">fsTracer :: Trace IO Text -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
</span><a href="#local-6989586621679350075"><span class="hs-identifier hs-var hs-var">fsTracer</span></a></span></span><span> </span><span id="local-6989586621679350074"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350074"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO String
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a (m :: * -&gt; *). Show a =&gt; Tracer m String -&gt; Tracer m a
</span><span class="hs-identifier hs-var">showTracing</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO String
 -&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk)))
-&gt; Tracer IO String
-&gt; Tracer IO (TraceLabelCreds (ForgeStateInfo blk))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Tracer IO Text -&gt; Tracer IO String
forall (f :: * -&gt; *) a b. Contravariant f =&gt; (a -&gt; b) -&gt; f b -&gt; f a
</span><span class="hs-identifier hs-var">contramap</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO Text -&gt; Tracer IO String)
-&gt; Tracer IO Text -&gt; Tracer IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350074"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-870"></span><span>
</span><span id="line-871"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-872"></span><span class="hs-comment">-- NodeToClient Tracers</span><span>
</span><span id="line-873"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-874"></span><span>
</span><span id="line-875"></span><span id="local-6989586621679350942"><span id="local-6989586621679350943"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-type">nodeToClientTracers'</span></a></span><span>
</span><span id="line-876"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">StandardHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679350943"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-877"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ApplyTxErr</span></span><span> </span><span class="annot"><a href="#local-6989586621679350943"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">GenTx</span></span><span> </span><span class="annot"><a href="#local-6989586621679350943"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350942"><span class="hs-identifier hs-type">localPeer</span></a></span><span>
</span><span id="line-880"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ShowQuery</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Query</span></span><span> </span><span class="annot"><a href="#local-6989586621679350943"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-881"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-882"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-883"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-884"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToClient.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679350942"><span class="hs-identifier hs-type">localPeer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350943"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-886"></span><span id="nodeToClientTracers%27"><span class="annot"><span class="annottext">nodeToClientTracers' :: TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' localPeer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToClientTracers%27"><span class="hs-identifier hs-var hs-var">nodeToClientTracers'</span></a></span></span><span> </span><span id="local-6989586621679350071"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350071"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679350070"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350070"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350069"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350069"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-887"></span><span>  </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToClient.Tracers</span></span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-889"></span><span>    </span><span class="annot"><span class="annottext">OnOff TraceLocalChainSyncProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (ChainSync (Serialised blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceLocalChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350071"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350070"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalChainSyncProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350069"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-890"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-891"></span><span>    </span><span class="annot"><span class="annottext">OnOff TraceLocalTxSubmissionProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (LocalTxSubmission (GenTx blk) (ApplyTxErr blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalTxSubmissionProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalTxSubmissionProtocol"><span class="hs-identifier hs-var hs-var">traceLocalTxSubmissionProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350071"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350070"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalTxSubmissionProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350069"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-892"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tStateQueryTracer :: Tracer
  IO
  (TraceLabelPeer
     localPeer
     (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
</span><span class="hs-identifier hs-var">NodeToClient.tStateQueryTracer</span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-893"></span><span>    </span><span class="annot"><span class="annottext">OnOff TraceLocalStateQueryProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        localPeer
        (TraceSendRecv (LocalStateQuery blk (Point blk) (Query blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceLocalStateQueryProtocol
</span><a href="Cardano.Tracing.Config.html#traceLocalStateQueryProtocol"><span class="hs-identifier hs-var hs-var">traceLocalStateQueryProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350071"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350070"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;LocalStateQueryProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350069"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-894"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-895"></span><span>
</span><span id="line-896"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-897"></span><span class="hs-comment">-- NodeToNode Tracers</span><span>
</span><span id="line-898"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span id="local-6989586621679350935"><span id="local-6989586621679350938"><span class="annot"><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-type">nodeToNodeTracers'</span></a></span><span>
</span><span id="line-901"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Consensus.RunNode</span></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-902"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cardano.Tracing.ConvertTxId.html#ConvertTxId"><span class="hs-identifier hs-type">ConvertTxId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-903"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasTxs</span></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-904"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-905"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-906"></span><span>     </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350935"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-907"></span><span>     </span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#TraceSelection"><span class="hs-identifier hs-type">TraceSelection</span></a></span><span>
</span><span id="line-909"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-910"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-911"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NodeToNode.Tracers'</span></span><span> </span><span class="annot"><a href="#local-6989586621679350935"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350938"><span class="hs-identifier hs-type">blk</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">DeserialiseFailure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-912"></span><span id="nodeToNodeTracers%27"><span class="annot"><span class="annottext">nodeToNodeTracers' :: TraceSelection
-&gt; TracingVerbosity
-&gt; Trace IO Text
-&gt; Tracers' peer blk DeserialiseFailure (Tracer IO)
</span><a href="Cardano.Tracing.Tracers.html#nodeToNodeTracers%27"><span class="hs-identifier hs-var hs-var">nodeToNodeTracers'</span></a></span></span><span> </span><span id="local-6989586621679350065"><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span></span><span> </span><span id="local-6989586621679350064"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350064"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350063"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-913"></span><span>  </span><span class="annot"><span class="annottext">Tracers :: forall peer blk e (f :: * -&gt; *).
f (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch blk (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
-&gt; f (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
-&gt; Tracers' peer blk e f
</span><span class="hs-identifier hs-type">NodeToNode.Tracers</span></span><span>
</span><span id="line-914"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">tChainSyncTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer
        (TraceSendRecv (ChainSync (Header blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350064"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-915"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tChainSyncSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer
     (TraceSendRecv
        (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tChainSyncSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceChainSyncProtocol
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer
        (TraceSendRecv
           (ChainSync (SerialisedHeader blk) (Point blk) (Tip blk))))
forall a (b :: Symbol).
(Show a, HasSeverityAnnotation a) =&gt;
OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceChainSyncProtocol
</span><a href="Cardano.Tracing.Config.html#traceChainSyncProtocol"><span class="hs-identifier hs-var hs-var">traceChainSyncProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;ChainSyncProtocolSerialised&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-916"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchTracer :: Tracer
  IO
  (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer peer (TraceSendRecv (BlockFetch blk (Point blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchProtocol
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchProtocol"><span class="hs-identifier hs-var hs-var">traceBlockFetchProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350064"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-917"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tBlockFetchSerialisedTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tBlockFetchSerialisedTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceBlockFetchProtocolSerialised
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceSendRecv (BlockFetch (Serialised blk) (Point blk))))
forall a (b :: Symbol).
(Show a, HasSeverityAnnotation a) =&gt;
OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceBlockFetchProtocolSerialised
</span><a href="Cardano.Tracing.Config.html#traceBlockFetchProtocolSerialised"><span class="hs-identifier hs-var hs-var">traceBlockFetchProtocolSerialised</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchProtocolSerialised&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmissionTracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmissionTracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxSubmissionProtocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission (GenTxId blk) (GenTx blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxSubmissionProtocol
</span><a href="Cardano.Tracing.Config.html#traceTxSubmissionProtocol"><span class="hs-identifier hs-var hs-var">traceTxSubmissionProtocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350064"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxSubmissionProtocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-919"></span><span>  </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">tTxSubmission2Tracer :: Tracer
  IO
  (TraceLabelPeer
     peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
</span><span class="hs-identifier hs-var">NodeToNode.tTxSubmission2Tracer</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OnOff TraceTxSubmission2Protocol
-&gt; TracingVerbosity
-&gt; Text
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (TraceLabelPeer
        peer (TraceSendRecv (TxSubmission2 (GenTxId blk) (GenTx blk))))
forall a (b :: Symbol).
Transformable Text IO a =&gt;
OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TraceSelection -&gt; OnOff TraceTxSubmission2Protocol
</span><a href="Cardano.Tracing.Config.html#traceTxSubmission2Protocol"><span class="hs-identifier hs-var hs-var">traceTxSubmission2Protocol</span></a></span><span> </span><span class="annot"><span class="annottext">TraceSelection
</span><a href="#local-6989586621679350065"><span class="hs-identifier hs-var">trSel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350064"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;TxSubmission2Protocol&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350063"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-920"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span id="local-6989586621679350834"><span id="local-6989586621679350835"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-type">teeTraceBlockFetchDecision</span></a></span><span>
</span><span id="line-923"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679350835"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-924"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="annot"><a href="#local-6989586621679350834"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-925"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350835"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-926"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-927"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-928"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350835"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350834"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-930"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350835"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350834"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-931"></span><span id="teeTraceBlockFetchDecision"><span class="annot"><span class="annottext">teeTraceBlockFetchDecision :: TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecision</span></a></span></span><span> </span><span id="local-6989586621679350056"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350056"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350055"><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679350055"><span class="hs-identifier hs-var">eliding</span></a></span></span><span> </span><span id="local-6989586621679350054"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350054"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-932"></span><span>  </span><span class="annot"><span class="annottext">(WithSeverity
   [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity
    [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
  -&gt; IO ())
 -&gt; Tracer
      IO
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]))
-&gt; (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
    -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679350053"><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679350053"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-933"></span><span>    </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-var">teeTraceBlockFetchDecision'</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350051"><span class="hs-identifier hs-var">meTr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679350053"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-934"></span><span>    </span><span class="annot"><span class="annottext">Tracer
  IO
  (WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
-&gt; WithSeverity
     [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
-&gt; IO ()
forall (m :: * -&gt; *) a. Tracer m a -&gt; a -&gt; m ()
</span><span class="hs-identifier hs-var">traceWith</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall peer blk.
(Eq peer, HasHeader blk, Show peer) =&gt;
TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-var">teeTraceBlockFetchDecisionElide</span></a></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350056"><span class="hs-identifier hs-var">verb</span></a></span><span> </span><span class="annot"><span class="annottext">MVar
  (Maybe
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
   Integer)
</span><a href="#local-6989586621679350055"><span class="hs-identifier hs-var">eliding</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350049"><span class="hs-identifier hs-var">bfdTr</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">WithSeverity
  [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679350053"><span class="hs-identifier hs-var">ev</span></a></span><span>
</span><span id="line-935"></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-936"></span><span>   </span><span id="local-6989586621679350051"><span class="annot"><span class="annottext">meTr :: Trace IO Text
</span><a href="#local-6989586621679350051"><span class="hs-identifier hs-var hs-var">meTr</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metrics&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350054"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-937"></span><span>   </span><span id="local-6989586621679350049"><span class="annot"><span class="annottext">bfdTr :: Trace IO Text
</span><a href="#local-6989586621679350049"><span class="hs-identifier hs-var hs-var">bfdTr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;BlockFetchDecision&quot;</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350054"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span id="local-6989586621679350696"><span id="local-6989586621679350697"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-type">teeTraceBlockFetchDecision'</span></a></span><span>
</span><span id="line-940"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-941"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350697"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350696"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-942"></span><span id="teeTraceBlockFetchDecision%27"><span class="annot"><span class="annottext">teeTraceBlockFetchDecision' :: Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecision%27"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecision'</span></a></span></span><span> </span><span id="local-6989586621679350048"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350048"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-943"></span><span>    </span><span class="annot"><span class="annottext">(WithSeverity
   [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
 -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall (m :: * -&gt; *) a. (a -&gt; m ()) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">Tracer</span></span><span> </span><span class="annot"><span class="annottext">((WithSeverity
    [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
  -&gt; IO ())
 -&gt; Tracer
      IO
      (WithSeverity
         [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]))
-&gt; (WithSeverity
      [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
    -&gt; IO ())
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679350047"><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679350047"><span class="hs-identifier hs-var">peers</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-944"></span><span>      </span><span id="local-6989586621679350046"><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350046"><span class="hs-identifier hs-var">meta</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Severity -&gt; PrivacyAnnotation -&gt; IO LOMeta
forall (m :: * -&gt; *).
MonadIO m =&gt;
Severity -&gt; PrivacyAnnotation -&gt; m LOMeta
</span><span class="hs-identifier hs-var">mkLOMeta</span></span><span> </span><span class="annot"><span class="annottext">Severity
</span><span class="hs-identifier hs-var">Info</span></span><span> </span><span class="annot"><span class="annottext">PrivacyAnnotation
</span><span class="hs-identifier hs-var">Confidential</span></span><span>
</span><span id="line-945"></span><span>      </span><span class="annot"><span class="annottext">Trace IO Text -&gt; (LOMeta, LOContent Text) -&gt; IO ()
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
Trace m a -&gt; (LOMeta, LOContent a) -&gt; m ()
</span><span class="hs-identifier hs-var">traceNamedObject</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350048"><span class="hs-identifier hs-var">tr</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LOMeta
</span><a href="#local-6989586621679350046"><span class="hs-identifier hs-var">meta</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Measurable -&gt; LOContent Text
forall a. Text -&gt; Measurable -&gt; LOContent a
</span><span class="hs-identifier hs-var">LogValue</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;connectedPeers&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Measurable -&gt; LOContent Text)
-&gt; (Integer -&gt; Measurable) -&gt; Integer -&gt; LOContent Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Measurable
</span><span class="hs-identifier hs-var">PureI</span></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; LOContent Text) -&gt; Integer -&gt; LOContent Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; Integer
forall a b. (Integral a, Num b) =&gt; a -&gt; b
</span><span class="hs-identifier hs-var">fromIntegral</span></span><span> </span><span class="annot"><span class="annottext">(Int -&gt; Integer) -&gt; Int -&gt; Integer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])] -&gt; Int
forall a. HasLength a =&gt; a -&gt; Int
</span><span class="hs-identifier hs-var">length</span></span><span> </span><span class="annot"><span class="annottext">[TraceLabelPeer peer (FetchDecision [Point (Header blk)])]
</span><a href="#local-6989586621679350047"><span class="hs-identifier hs-var">peers</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>
</span><span id="line-947"></span><span id="local-6989586621679350043"><span id="local-6989586621679350044"><span class="annot"><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-type">teeTraceBlockFetchDecisionElide</span></a></span><span>
</span><span id="line-948"></span><span>    </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679350044"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-949"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="annot"><a href="#local-6989586621679350043"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-950"></span><span>       </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350044"><span class="hs-identifier hs-type">peer</span></a></span><span>
</span><span id="line-951"></span><span>       </span><span class="hs-special">)</span><span>
</span><span id="line-952"></span><span>    </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-953"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MVar</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350044"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350043"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-955"></span><span>    </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">TraceLabelPeer</span></span><span> </span><span class="annot"><a href="#local-6989586621679350044"><span class="hs-identifier hs-type">peer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">FetchDecision</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Point</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350043"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-956"></span><span id="teeTraceBlockFetchDecisionElide"><span class="annot"><span class="annottext">teeTraceBlockFetchDecisionElide :: TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
</span><a href="Cardano.Tracing.Tracers.html#teeTraceBlockFetchDecisionElide"><span class="hs-identifier hs-var hs-var">teeTraceBlockFetchDecisionElide</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
-&gt; MVar
     (Maybe
        (WithSeverity
           [TraceLabelPeer peer (FetchDecision [Point (Header blk)])]),
      Integer)
-&gt; Trace IO Text
-&gt; Tracer
     IO
     (WithSeverity
        [TraceLabelPeer peer (FetchDecision [Point (Header blk)])])
forall a t.
(ElidingTracer a, ToObject t, Transformable t IO a) =&gt;
TracingVerbosity
-&gt; MVar (Maybe a, Integer) -&gt; Trace IO t -&gt; Tracer IO a
</span><span class="hs-identifier hs-var">elideToLogObject</span></span><span>
</span><span id="line-957"></span><span>
</span><span id="line-958"></span><span>
</span><span id="line-959"></span><span class="hs-comment">-- | get information about a chain fragment</span><span>
</span><span id="line-960"></span><span>
</span><span id="line-961"></span><span class="hs-keyword">data</span><span> </span><span id="ChainInformation"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-var">ChainInformation</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ChainInformation"><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-var">ChainInformation</span></a></span></span><span>
</span><span id="line-962"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="slots"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var hs-var">slots</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-963"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="blocks"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var hs-var">blocks</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-964"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="density"><span class="annot"><span class="annottext">ChainInformation -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var hs-var">density</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-965"></span><span>    </span><span class="hs-comment">-- ^ the actual number of blocks created over the maximum expected number</span><span>
</span><span id="line-966"></span><span>    </span><span class="hs-comment">-- of blocks that could be created over the span of the last @k@ blocks.</span><span>
</span><span id="line-967"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="epoch"><span class="annot"><span class="annottext">ChainInformation -&gt; EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var hs-var">epoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">EpochNo</span></span><span>
</span><span id="line-968"></span><span>    </span><span class="hs-comment">-- ^ In which epoch is the tip of the current chain</span><span>
</span><span id="line-969"></span><span>  </span><span class="hs-special">,</span><span> </span><span id="slotInEpoch"><span class="annot"><span class="annottext">ChainInformation -&gt; Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var hs-var">slotInEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span>
</span><span id="line-970"></span><span>    </span><span class="hs-comment">-- ^ Relative slot number of the tip of the current chain within the</span><span>
</span><span id="line-971"></span><span>    </span><span class="hs-comment">-- epoch.</span><span>
</span><span id="line-972"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-973"></span><span>
</span><span id="line-974"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-type">chainInformation</span></a></span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679350873"><span class="annot"><a href="#local-6989586621679350873"><span class="hs-identifier hs-type">blk</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350873"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ChainDB.NewTipInfo</span></span><span> </span><span class="annot"><a href="#local-6989586621679350873"><span class="hs-identifier hs-type">blk</span></a></span><span>
</span><span id="line-977"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AF.AnchoredFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350873"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-978"></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-979"></span><span id="chainInformation"><span class="annot"><span class="annottext">chainInformation :: NewTipInfo blk -&gt; AnchoredFragment (Header blk) -&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#chainInformation"><span class="hs-identifier hs-var hs-var">chainInformation</span></a></span></span><span> </span><span id="local-6989586621679350042"><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350042"><span class="hs-identifier hs-var">newTipInfo</span></a></span></span><span> </span><span id="local-6989586621679350041"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350041"><span class="hs-identifier hs-var">frag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ChainInformation :: Word64
-&gt; Word64 -&gt; Rational -&gt; EpochNo -&gt; Word64 -&gt; ChainInformation
</span><a href="Cardano.Tracing.Tracers.html#ChainInformation"><span class="hs-identifier hs-type">ChainInformation</span></a></span><span>
</span><span id="line-980"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">slots :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slots"><span class="hs-identifier hs-var">slots</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; Word64) -&gt; SlotNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.headSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350041"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-981"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">blocks :: Word64
</span><a href="Cardano.Tracing.Tracers.html#blocks"><span class="hs-identifier hs-var">blocks</span></a></span><span>      </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64) -&gt; BlockNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; WithOrigin BlockNo -&gt; BlockNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; BlockNo
</span><span class="hs-identifier hs-var">BlockNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin BlockNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin BlockNo
</span><span class="hs-identifier hs-var">AF.headBlockNo</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350041"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">density :: Rational
</span><a href="Cardano.Tracing.Tracers.html#density"><span class="hs-identifier hs-var">density</span></a></span><span>     </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; Rational
forall blk.
HasHeader (Header blk) =&gt;
AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var">fragmentChainDensity</span></a></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350041"><span class="hs-identifier hs-var">frag</span></a></span><span>
</span><span id="line-983"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">epoch :: EpochNo
</span><a href="Cardano.Tracing.Tracers.html#epoch"><span class="hs-identifier hs-var">epoch</span></a></span><span>       </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; EpochNo
forall blk. NewTipInfo blk -&gt; EpochNo
</span><span class="hs-identifier hs-var hs-var">ChainDB.newTipEpoch</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350042"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span>
</span><span id="line-984"></span><span>    </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">slotInEpoch :: Word64
</span><a href="Cardano.Tracing.Tracers.html#slotInEpoch"><span class="hs-identifier hs-var">slotInEpoch</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk -&gt; Word64
forall blk. NewTipInfo blk -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">ChainDB.newTipSlotInEpoch</span></span><span> </span><span class="annot"><span class="annottext">NewTipInfo blk
</span><a href="#local-6989586621679350042"><span class="hs-identifier hs-var">newTipInfo</span></a></span><span>
</span><span id="line-985"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span id="local-6989586621679350787"><span class="annot"><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-type">fragmentChainDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-988"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">HasHeader</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350787"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-989"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AF.AnchoredFragment</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Header</span></span><span> </span><span class="annot"><a href="#local-6989586621679350787"><span class="hs-identifier hs-type">blk</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span></span><span>
</span><span id="line-990"></span><span id="fragmentChainDensity"><span class="annot"><span class="annottext">fragmentChainDensity :: AnchoredFragment (Header blk) -&gt; Rational
</span><a href="Cardano.Tracing.Tracers.html#fragmentChainDensity"><span class="hs-identifier hs-var hs-var">fragmentChainDensity</span></a></span></span><span> </span><span id="local-6989586621679350035"><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350035"><span class="hs-identifier hs-var">frag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Rational
</span><a href="#local-6989586621679350034"><span class="hs-identifier hs-var">calcDensity</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350033"><span class="hs-identifier hs-var">blockD</span></a></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350032"><span class="hs-identifier hs-var">slotD</span></a></span><span>
</span><span id="line-991"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-992"></span><span>    </span><span class="annot"><a href="#local-6989586621679350034"><span class="hs-identifier hs-type">calcDensity</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Word64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-993"></span><span>    </span><span id="local-6989586621679350034"><span class="annot"><span class="annottext">calcDensity :: Word64 -&gt; Word64 -&gt; Rational
</span><a href="#local-6989586621679350034"><span class="hs-identifier hs-var hs-var">calcDensity</span></a></span></span><span> </span><span id="local-6989586621679350031"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350031"><span class="hs-identifier hs-var">bl</span></a></span></span><span> </span><span id="local-6989586621679350030"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350030"><span class="hs-identifier hs-var">sl</span></a></span></span><span>
</span><span id="line-994"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350030"><span class="hs-identifier hs-var">sl</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Bool
forall a. Ord a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">&gt;</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350031"><span class="hs-identifier hs-var">bl</span></a></span><span> </span><span class="annot"><span class="annottext">Rational -&gt; Rational -&gt; Rational
forall a. Fractional a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">/</span></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Rational
forall a. Real a =&gt; a -&gt; Rational
</span><span class="hs-identifier hs-var">toRational</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350030"><span class="hs-identifier hs-var">sl</span></a></span><span>
</span><span id="line-995"></span><span>      </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Rational
</span><span class="hs-number">0</span></span><span>
</span><span id="line-996"></span><span>    </span><span id="local-6989586621679350029"><span class="annot"><span class="annottext">slotN :: Word64
</span><a href="#local-6989586621679350029"><span class="hs-identifier hs-var hs-var">slotN</span></a></span></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="annot"><span class="annottext">(SlotNo -&gt; Word64) -&gt; SlotNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.headSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350035"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-997"></span><span>    </span><span class="hs-comment">-- Slot of the tip - slot @k@ blocks back. Use 0 as the slot for genesis</span><span>
</span><span id="line-998"></span><span>    </span><span class="hs-comment">-- includes EBBs</span><span>
</span><span id="line-999"></span><span>    </span><span id="local-6989586621679350032"><span class="annot"><span class="annottext">slotD :: Word64
</span><a href="#local-6989586621679350032"><span class="hs-identifier hs-var hs-var">slotD</span></a></span></span><span>   </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350029"><span class="hs-identifier hs-var">slotN</span></a></span><span>
</span><span id="line-1000"></span><span>            </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">SlotNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unSlotNo</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SlotNo -&gt; WithOrigin SlotNo -&gt; SlotNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="annot"><span class="annottext">SlotNo
</span><span class="hs-number">0</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin SlotNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin SlotNo
</span><span class="hs-identifier hs-var">AF.lastSlot</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350035"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1001"></span><span>    </span><span class="hs-comment">-- Block numbers start at 1. We ignore the genesis EBB, which has block number 0.</span><span>
</span><span id="line-1002"></span><span>    </span><span id="local-6989586621679350033"><span class="annot"><span class="annottext">blockD :: Word64
</span><a href="#local-6989586621679350033"><span class="hs-identifier hs-var hs-var">blockD</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350027"><span class="hs-identifier hs-var">blockN</span></a></span><span> </span><span class="annot"><span class="annottext">Word64 -&gt; Word64 -&gt; Word64
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-glyph hs-var">-</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350026"><span class="hs-identifier hs-var">firstBlock</span></a></span><span>
</span><span id="line-1003"></span><span>    </span><span id="local-6989586621679350027"><span class="annot"><span class="annottext">blockN :: Word64
</span><a href="#local-6989586621679350027"><span class="hs-identifier hs-var hs-var">blockN</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64) -&gt; BlockNo -&gt; Word64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; WithOrigin BlockNo -&gt; BlockNo
forall t. t -&gt; WithOrigin t -&gt; t
</span><span class="hs-identifier hs-var">fromWithOrigin</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Word64 -&gt; BlockNo
</span><span class="hs-identifier hs-var">BlockNo</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AnchoredFragment (Header blk) -&gt; WithOrigin BlockNo
forall block.
HasHeader block =&gt;
AnchoredFragment block -&gt; WithOrigin BlockNo
</span><span class="hs-identifier hs-var">AF.headBlockNo</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350035"><span class="hs-identifier hs-var">frag</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1004"></span><span>    </span><span id="local-6989586621679350026"><span class="annot"><span class="annottext">firstBlock :: Word64
</span><a href="#local-6989586621679350026"><span class="hs-identifier hs-var hs-var">firstBlock</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BlockNo -&gt; Word64
</span><span class="hs-identifier hs-var hs-var">unBlockNo</span></span><span> </span><span class="annot"><span class="annottext">(BlockNo -&gt; Word64)
-&gt; (Header blk -&gt; BlockNo) -&gt; Header blk -&gt; Word64
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Header blk -&gt; BlockNo
forall b. HasHeader b =&gt; b -&gt; BlockNo
</span><span class="hs-identifier hs-var">blockNo</span></span><span> </span><span class="annot"><span class="annottext">(Header blk -&gt; Word64)
-&gt; Either (Anchor (Header blk)) (Header blk)
-&gt; Either (Anchor (Header blk)) Word64
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
-&gt; Either (Anchor (Header blk)) (Header blk)
forall v a b. Anchorable v a b =&gt; AnchoredSeq v a b -&gt; Either a b
</span><span class="hs-identifier hs-var">AF.last</span></span><span> </span><span class="annot"><span class="annottext">AnchoredFragment (Header blk)
</span><a href="#local-6989586621679350035"><span class="hs-identifier hs-var">frag</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1005"></span><span>      </span><span class="hs-comment">-- Empty fragment, no blocks. We have that @blocks = 1 - 1 = 0@</span><span>
</span><span id="line-1006"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">Anchor (Header blk)
</span><span class="hs-identifier">_</span></span><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1007"></span><span>      </span><span class="hs-comment">-- The oldest block is the genesis EBB with block number 0,</span><span>
</span><span id="line-1008"></span><span>      </span><span class="hs-comment">-- don't let it contribute to the number of blocks</span><span>
</span><span id="line-1009"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">0</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><span class="hs-number">1</span></span><span>
</span><span id="line-1010"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679350024"><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350024"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Word64
</span><a href="#local-6989586621679350024"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-1011"></span><span>
</span><span id="line-1012"></span><span>
</span><span id="line-1013"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1014"></span><span class="hs-comment">-- Trace Helpers</span><span>
</span><span id="line-1015"></span><span class="hs-comment">--------------------------------------------------------------------------------</span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-type">readableTraceBlockchainTimeEvent</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TraceBlockchainTimeEvent</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">UTCTime</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1018"></span><span id="readableTraceBlockchainTimeEvent"><span class="annot"><span class="annottext">readableTraceBlockchainTimeEvent :: TraceBlockchainTimeEvent UTCTime -&gt; Text
</span><a href="Cardano.Tracing.Tracers.html#readableTraceBlockchainTimeEvent"><span class="hs-identifier hs-var hs-var">readableTraceBlockchainTimeEvent</span></a></span></span><span> </span><span id="local-6989586621679350023"><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679350023"><span class="hs-identifier hs-var">ev</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TraceBlockchainTimeEvent UTCTime
</span><a href="#local-6989586621679350023"><span class="hs-identifier hs-var">ev</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1019"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceStartTimeInTheFuture</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">SystemStart</span></span><span> </span><span id="local-6989586621679350020"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350020"><span class="hs-identifier hs-var">start</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679350019"><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679350019"><span class="hs-identifier hs-var">toWait</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1020"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Waiting &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text)
-&gt; (NominalDiffTime -&gt; String) -&gt; NominalDiffTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NominalDiffTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NominalDiffTime
</span><a href="#local-6989586621679350019"><span class="hs-identifier hs-var">toWait</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; until genesis start time at &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350020"><span class="hs-identifier hs-var">start</span></a></span><span>
</span><span id="line-1021"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceCurrentSlotUnknown</span></span><span> </span><span id="local-6989586621679350017"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350017"><span class="hs-identifier hs-var">time</span></a></span></span><span> </span><span class="annot"><span class="annottext">PastHorizonException
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1022"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Too far from the chain tip to determine the current slot number for the time &quot;</span></span><span>
</span><span id="line-1023"></span><span>       </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350017"><span class="hs-identifier hs-var">time</span></a></span><span>
</span><span id="line-1024"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">TraceSystemClockMovedBack</span></span><span> </span><span id="local-6989586621679350015"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350015"><span class="hs-identifier hs-var">prevTime</span></a></span></span><span> </span><span id="local-6989586621679350014"><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350014"><span class="hs-identifier hs-var">newTime</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1025"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;The system wall clock time moved backwards, but within our tolerance &quot;</span></span><span>
</span><span id="line-1026"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;threshold. Previous 'current' time: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350015"><span class="hs-identifier hs-var">prevTime</span></a></span><span>
</span><span id="line-1027"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;. New 'current' time: &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; (UTCTime -&gt; String) -&gt; UTCTime -&gt; Text
forall k (cat :: k -&gt; k -&gt; *) (b :: k) (c :: k) (a :: k).
Category cat =&gt;
cat b c -&gt; cat a b -&gt; cat a c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621679350014"><span class="hs-identifier hs-var">newTime</span></a></span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span id="local-6989586621679350931"><span id="local-6989586621679350932"><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-type">tracerOnOff</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Transformable</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350932"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-1030"></span><span>            </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350931"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-1031"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">TracingVerbosity</span></span><span>
</span><span id="line-1032"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span>
</span><span id="line-1033"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span>
</span><span id="line-1034"></span><span>            </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350932"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1035"></span><span id="tracerOnOff"><span class="annot"><span class="annottext">tracerOnOff :: OnOff b -&gt; TracingVerbosity -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var hs-var">tracerOnOff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1036"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff"><span class="hs-identifier hs-var">tracerOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679350012"><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350012"><span class="hs-identifier hs-var">verb</span></a></span></span><span> </span><span id="local-6989586621679350011"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350011"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679350010"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350010"><span class="hs-identifier hs-var">trcer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-1037"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity a) -&gt; Tracer IO a)
-&gt; Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity -&gt; Trace IO Text -&gt; Tracer IO (WithSeverity a)
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
TracingVerbosity -&gt; Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject'</span></span><span> </span><span class="annot"><span class="annottext">TracingVerbosity
</span><a href="#local-6989586621679350012"><span class="hs-identifier hs-var">verb</span></a></span><span>
</span><span id="line-1038"></span><span>                                        </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO (WithSeverity a))
-&gt; Trace IO Text -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679350011"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679350010"><span class="hs-identifier hs-var">trcer</span></a></span><span>
</span><span id="line-1039"></span><span>
</span><span id="line-1040"></span><span id="local-6989586621679350952"><span id="local-6989586621679350953"><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-type">tracerOnOff'</span></a></span><span>
</span><span id="line-1041"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350953"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350952"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350952"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1042"></span><span id="tracerOnOff%27"><span class="annot"><span class="annottext">tracerOnOff' :: OnOff b -&gt; Tracer IO a -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var hs-var">tracerOnOff'</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1043"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#tracerOnOff%27"><span class="hs-identifier hs-var">tracerOnOff'</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679350009"><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679350009"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
</span><a href="#local-6989586621679350009"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1044"></span><span>
</span><span id="line-1045"></span><span id="local-6989586621679350008"><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679350003"><span id="local-6989586621679350006"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350008"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span class="annot"><a href="#local-6989586621679350008"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1046"></span><span>  </span><span id="local-6989586621679350001"><span class="annot"><span class="annottext">show :: WithSeverity a -&gt; String
</span><a href="#local-6989586621679350001"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">WithSeverity</span></span><span> </span><span id="local-6989586621679350000"><span class="annot"><span class="annottext">Severity
</span><a href="#local-6989586621679350000"><span class="hs-identifier hs-var">_sev</span></a></span></span><span> </span><span id="local-6989586621679349999"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679349999"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">a -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679349999"><span class="hs-identifier hs-var">a</span></a></span></span><span>
</span><span id="line-1047"></span><span>
</span><span id="line-1048"></span><span id="local-6989586621679350704"><span id="local-6989586621679350705"><span class="annot"><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-type">showOnOff</span></a></span><span>
</span><span id="line-1049"></span><span>  </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679350705"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasSeverityAnnotation</span></span><span> </span><span class="annot"><a href="#local-6989586621679350705"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1050"></span><span>  </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679350704"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">LoggerName</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621679350705"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-1051"></span><span id="showOnOff"><span class="annot"><span class="annottext">showOnOff :: OnOff b -&gt; Text -&gt; Trace IO Text -&gt; Tracer IO a
</span><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var hs-var">showOnOff</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO a
forall (m :: * -&gt; *) a. Applicative m =&gt; Tracer m a
</span><span class="hs-identifier hs-var">nullTracer</span></span><span>
</span><span id="line-1052"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#showOnOff"><span class="hs-identifier hs-var">showOnOff</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cardano.Tracing.Config.html#OnOff"><span class="hs-identifier hs-type">OnOff</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679349998"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679349998"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679349997"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679349997"><span class="hs-identifier hs-var">trcer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a (m :: * -&gt; *).
HasSeverityAnnotation a =&gt;
Tracer m (WithSeverity a) -&gt; Tracer m a
</span><span class="hs-identifier hs-var">annotateSeverity</span></span><span>
</span><span id="line-1053"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO (WithSeverity a) -&gt; Tracer IO a)
-&gt; Tracer IO (WithSeverity a) -&gt; Tracer IO a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Tracer IO String -&gt; Tracer IO (WithSeverity a)
forall a (m :: * -&gt; *). Show a =&gt; Tracer m String -&gt; Tracer m a
</span><span class="hs-identifier hs-var">showTracing</span></span><span>
</span><span id="line-1054"></span><span>                                        </span><span class="annot"><span class="annottext">(Tracer IO String -&gt; Tracer IO (WithSeverity a))
-&gt; Tracer IO String -&gt; Tracer IO (WithSeverity a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Tracer IO String
</span><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-var">withName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679349998"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679349997"><span class="hs-identifier hs-var">trcer</span></a></span><span>
</span><span id="line-1055"></span><span>
</span><span id="line-1056"></span><span class="annot"><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-type">withName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Trace</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Tracer</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-1057"></span><span id="withName"><span class="annot"><span class="annottext">withName :: Text -&gt; Trace IO Text -&gt; Tracer IO String
</span><a href="Cardano.Tracing.Tracers.html#withName"><span class="hs-identifier hs-var hs-var">withName</span></a></span></span><span> </span><span id="local-6989586621679349995"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679349995"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621679349994"><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679349994"><span class="hs-identifier hs-var">tr</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; Tracer IO Text -&gt; Tracer IO String
forall (f :: * -&gt; *) a b. Contravariant f =&gt; (a -&gt; b) -&gt; f b -&gt; f a
</span><span class="hs-identifier hs-var">contramap</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">Text.pack</span></span><span> </span><span class="annot"><span class="annottext">(Tracer IO Text -&gt; Tracer IO String)
-&gt; Tracer IO Text -&gt; Tracer IO String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Trace IO Text -&gt; Tracer IO Text
forall (m :: * -&gt; *) a b.
(ToLogObject m, ToObject a, Transformable a m b) =&gt;
Trace m a -&gt; Tracer m b
</span><span class="hs-identifier hs-var">toLogObject</span></span><span> </span><span class="annot"><span class="annottext">(Trace IO Text -&gt; Tracer IO Text)
-&gt; Trace IO Text -&gt; Tracer IO Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Trace IO Text -&gt; Trace IO Text
forall (m :: * -&gt; *) a. Text -&gt; Trace m a -&gt; Trace m a
</span><span class="hs-identifier hs-var">appendName</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679349995"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">Trace IO Text
</span><a href="#local-6989586621679349994"><span class="hs-identifier hs-var">tr</span></a></span><span>
</span><span id="line-1058"></span></pre></body></html>